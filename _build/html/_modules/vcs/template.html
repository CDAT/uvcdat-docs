<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>vcs.template &#8212; VCS 2.4.1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/globe.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="top" title="VCS 2.4.1 documentation" href="../../index.html" />
    <link rel="up" title="vcs" href="../vcs.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">VCS 2.4.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../vcs.html" accesskey="U">vcs</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for vcs.template</h1><div class="highlight"><pre>
<span></span><span class="c1"># Adapted for numpy/ma/cdms2 by convertcdms.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd"># Template (P) module</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1">###############################################################################</span>
<span class="c1">#                                                                             #</span>
<span class="c1"># Module:       template (P) module                                           #</span>
<span class="c1">#                                                                             #</span>
<span class="c1"># Copyright:    2000, Regents of the University of California                 #</span>
<span class="c1">#               This software may not be distributed to others without        #</span>
<span class="c1">#               permission of the author.                                     #</span>
<span class="c1">#                                                                             #</span>
<span class="c1"># Author:       PCMDI Software Team                                           #</span>
<span class="c1">#               Lawrence Livermore NationalLaboratory:                        #</span>
<span class="c1">#               support@pcmdi.llnl.gov                                        #</span>
<span class="c1">#                                                                             #</span>
<span class="c1"># Description:  Python command wrapper for VCS&#39;s template primary object.     #</span>
<span class="c1">#                                                                             #</span>
<span class="c1"># Version:      4.0                                                           #</span>
<span class="c1">#                                                                             #</span>
<span class="c1">###############################################################################</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">vcs</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">from</span> <span class="nn">Ptext</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># noqa</span>
<span class="kn">from</span> <span class="nn">Pformat</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># noqa</span>
<span class="kn">from</span> <span class="nn">Pxtickmarks</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># noqa</span>
<span class="kn">from</span> <span class="nn">Pytickmarks</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># noqa</span>
<span class="kn">from</span> <span class="nn">Pxlabels</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># noqa</span>
<span class="kn">from</span> <span class="nn">Pylabels</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># noqa</span>
<span class="kn">from</span> <span class="nn">Pboxeslines</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># noqa</span>
<span class="kn">from</span> <span class="nn">Plegend</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># noqa</span>
<span class="kn">from</span> <span class="nn">Pdata</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># noqa</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">cdutil</span>
<span class="kn">from</span> <span class="nn">projection</span> <span class="k">import</span> <span class="n">round_projections</span>
<span class="kn">from</span> <span class="nn">projection</span> <span class="k">import</span> <span class="n">elliptical_projections</span>
<span class="kn">from</span> <span class="nn">xmldocs</span> <span class="k">import</span> <span class="n">scriptdocs</span>

<span class="c1"># Following for class properties</span>


<span class="k">def</span> <span class="nf">_getgen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_setgen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;default&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You cannot modify the default template&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">cls</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;template attribute &#39;</span><span class="si">%s</span><span class="s2">&#39; must be of type </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span>
            <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">cls</span><span class="p">))</span>
    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>


<div class="viewcode-block" id="epsilon_gte"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.epsilon_gte">[docs]</a><span class="k">def</span> <span class="nf">epsilon_gte</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;a &gt;= b, using floating point epsilon value.&quot;&quot;&quot;</span>
    <span class="n">float_epsilon</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">finfo</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">eps</span>
    <span class="k">return</span> <span class="o">-</span><span class="n">float_epsilon</span> <span class="o">&lt;</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span></div>


<div class="viewcode-block" id="epsilon_lte"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.epsilon_lte">[docs]</a><span class="k">def</span> <span class="nf">epsilon_lte</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;a &lt;= b, using floating point epsilon value.&quot;&quot;&quot;</span>
    <span class="n">float_epsilon</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">finfo</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">eps</span>
    <span class="k">return</span> <span class="n">float_epsilon</span> <span class="o">&gt;</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span></div>


<span class="c1"># read .scr file</span>
<span class="k">def</span> <span class="nf">process_src</span><span class="p">(</span><span class="n">nm</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>

    <span class="c1"># Takes VCS script code (string) as input and generates boxfill gm from it</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">P</span><span class="p">(</span><span class="n">nm</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;template&quot;</span><span class="p">][</span><span class="n">nm</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">,</span> <span class="s2">&quot;Function&quot;</span><span class="p">,</span> <span class="s2">&quot;LogicalMask&quot;</span><span class="p">,</span> <span class="s2">&quot;Transform&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;units&quot;</span><span class="p">,</span>
                <span class="s2">&quot;crdate&quot;</span><span class="p">,</span> <span class="s2">&quot;crtime&quot;</span><span class="p">,</span> <span class="s2">&quot;comment#1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;comment#2&quot;</span><span class="p">,</span> <span class="s2">&quot;comment#3&quot;</span><span class="p">,</span> <span class="s2">&quot;comment#4&quot;</span><span class="p">,</span> <span class="s2">&quot;xname&quot;</span><span class="p">,</span> <span class="s2">&quot;yname&quot;</span><span class="p">,</span> <span class="s2">&quot;zname&quot;</span><span class="p">,</span> <span class="s2">&quot;tname&quot;</span><span class="p">,</span>
                <span class="s2">&quot;xvalue&quot;</span><span class="p">,</span> <span class="s2">&quot;yvalue&quot;</span><span class="p">,</span> <span class="s2">&quot;zvalue&quot;</span><span class="p">,</span> <span class="s2">&quot;tvalue&quot;</span><span class="p">,</span> <span class="s2">&quot;xunits&quot;</span><span class="p">,</span>
                <span class="s2">&quot;yunits&quot;</span><span class="p">,</span> <span class="s2">&quot;zunits&quot;</span><span class="p">,</span> <span class="s2">&quot;tunits&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;xtic#1&quot;</span><span class="p">,</span> <span class="s2">&quot;xtic#2&quot;</span><span class="p">,</span>
                <span class="s2">&quot;xmintic#a&quot;</span><span class="p">,</span> <span class="s2">&quot;xmintic#b&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ytic#1&quot;</span><span class="p">,</span> <span class="s2">&quot;ytic#2&quot;</span><span class="p">,</span> <span class="s2">&quot;ymintic#a&quot;</span><span class="p">,</span> <span class="s2">&quot;ymintic#b&quot;</span><span class="p">,</span> <span class="s2">&quot;xlabel#1&quot;</span><span class="p">,</span> <span class="s2">&quot;xlabel#2&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ylabel#1&quot;</span><span class="p">,</span> <span class="s2">&quot;ylabel#2&quot;</span><span class="p">,</span>
                <span class="s2">&quot;box#1&quot;</span><span class="p">,</span> <span class="s2">&quot;box#2&quot;</span><span class="p">,</span> <span class="s2">&quot;box#3&quot;</span><span class="p">,</span> <span class="s2">&quot;box#4&quot;</span><span class="p">,</span>
                <span class="s2">&quot;line#1&quot;</span><span class="p">,</span> <span class="s2">&quot;line#2&quot;</span><span class="p">,</span> <span class="s2">&quot;line#3&quot;</span><span class="p">,</span> <span class="s2">&quot;line#4&quot;</span><span class="p">,</span> <span class="s2">&quot;legend&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">]:</span>
        <span class="c1"># isolate that segment</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">code</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(&quot;</span> <span class="o">%</span> <span class="n">sub</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="c1"># not set in this case</span>
            <span class="k">continue</span>
        <span class="n">sc</span> <span class="o">=</span> <span class="n">code</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span>
        <span class="n">j</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
        <span class="n">sc</span> <span class="o">=</span> <span class="n">sc</span><span class="p">[:</span><span class="n">j</span><span class="p">]</span>
        <span class="c1"># name on template object</span>
        <span class="n">tnm</span> <span class="o">=</span> <span class="n">sub</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tnm</span> <span class="o">==</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span>
            <span class="n">tnm</span> <span class="o">=</span> <span class="s2">&quot;dataname&quot;</span>
        <span class="k">elif</span> <span class="n">tnm</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;tica&quot;</span><span class="p">:</span>
            <span class="n">tnm</span> <span class="o">=</span> <span class="n">tnm</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;tic1&quot;</span>
        <span class="k">elif</span> <span class="n">tnm</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;ticb&quot;</span><span class="p">:</span>
            <span class="n">tnm</span> <span class="o">=</span> <span class="n">tnm</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;tic2&quot;</span>
        <span class="k">elif</span> <span class="n">tnm</span> <span class="o">==</span> <span class="s2">&quot;transform&quot;</span><span class="p">:</span>
            <span class="n">tnm</span> <span class="o">=</span> <span class="s2">&quot;transformation&quot;</span>
        <span class="k">for</span> <span class="n">S</span> <span class="ow">in</span> <span class="n">sc</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">):</span>  <span class="c1"># all attributes are comman separated</span>
            <span class="n">nm</span><span class="p">,</span> <span class="n">val</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">)</span>  <span class="c1"># nm=val</span>
            <span class="k">if</span> <span class="n">nm</span> <span class="o">==</span> <span class="s2">&quot;p&quot;</span><span class="p">:</span>
                <span class="n">nm</span> <span class="o">=</span> <span class="s2">&quot;priority&quot;</span>
            <span class="k">elif</span> <span class="n">nm</span> <span class="o">==</span> <span class="s2">&quot;Tl&quot;</span><span class="p">:</span>
                <span class="n">nm</span> <span class="o">=</span> <span class="s2">&quot;line&quot;</span>
            <span class="k">elif</span> <span class="n">nm</span> <span class="o">==</span> <span class="s2">&quot;Tt&quot;</span><span class="p">:</span>
                <span class="n">nm</span> <span class="o">=</span> <span class="s2">&quot;texttable&quot;</span>
            <span class="k">elif</span> <span class="n">nm</span> <span class="o">==</span> <span class="s2">&quot;To&quot;</span><span class="p">:</span>
                <span class="n">nm</span> <span class="o">=</span> <span class="s2">&quot;textorientation&quot;</span>
            <span class="k">elif</span> <span class="n">nm</span> <span class="o">==</span> <span class="s2">&quot;Th&quot;</span><span class="p">:</span>
                <span class="n">nm</span> <span class="o">=</span> <span class="s2">&quot;format&quot;</span>
            <span class="n">tatt</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">tnm</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">tatt</span><span class="p">,</span> <span class="n">nm</span><span class="p">,</span> <span class="nb">eval</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>  <span class="c1"># int float should be ok here</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">tatt</span><span class="p">,</span> <span class="n">nm</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>  <span class="c1"># strings here</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="c1"># print &quot;COULD NOT SET %s.%s.%s to %s&quot; %</span>
                    <span class="c1"># (t.name,tnm,nm,val)</span>
                    <span class="k">pass</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">code</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;Orientation(&quot;</span><span class="p">)</span>
    <span class="n">t</span><span class="o">.</span><span class="n">orientation</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">code</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">12</span><span class="p">])</span>


<span class="c1">#############################################################################</span>
<span class="c1">#                                                                           #</span>
<span class="c1"># Template (P) graphics method Class.                                       #</span>
<span class="c1">#                                                                           #</span>
<span class="c1">#############################################################################</span>
<div class="viewcode-block" id="P"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.P">[docs]</a><span class="k">class</span> <span class="nc">P</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The template primary method (P) determines the location of each picture</span>
<span class="sd">    segment, the space to be allocated to it, and related properties relevant</span>
<span class="sd">    to its display.</span>

<span class="sd">     .. describe:: Useful Functions:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Show predefined templates</span>
<span class="sd">            a.show(&#39;template&#39;)</span>
<span class="sd">            # Show predefined text table methods</span>
<span class="sd">            a.show(&#39;texttable&#39;)</span>
<span class="sd">            # Show predefined text orientation methods</span>
<span class="sd">            a.show(&#39;textorientation&#39;)</span>
<span class="sd">            # Show predefined line methods</span>
<span class="sd">            a.show(&#39;line&#39;)</span>
<span class="sd">            # Show templates as a Python list</span>
<span class="sd">            a.listelements(&#39;template&#39;)</span>
<span class="sd">            # Updates the VCS Canvas at user&#39;s request</span>
<span class="sd">            a.update()</span>

<span class="sd">    .. describe:: Make a Canvas object to work with:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            # VCS Canvas constructor</span>
<span class="sd">            a=vcs.init()</span>

<span class="sd">    .. describe:: Create a new instance of template:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Two ways to create a templates:</span>
<span class="sd">            # Copies content of &#39;hovmuller&#39; to &#39;new&#39;</span>
<span class="sd">            temp=a.createtemplate(&#39;new&#39;,&#39;hovmuller&#39;)</span>
<span class="sd">            # Copies content of &#39;default&#39; to &#39;new&#39;</span>
<span class="sd">            temp=a.createtemplate(&#39;new&#39;)</span>

<span class="sd">    .. describe:: Modify an existing template:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">             temp=a.gettemplate(&#39;hovmuller&#39;)</span>
<span class="sd">&quot;&quot;&quot;</span>
    <span class="n">__slots__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;_name&quot;</span><span class="p">,</span> <span class="s2">&quot;_p_name&quot;</span><span class="p">,</span> <span class="s2">&quot;p_name&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;_orientation&quot;</span><span class="p">,</span> <span class="s2">&quot;_orientation&quot;</span><span class="p">,</span> <span class="s2">&quot;_file&quot;</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;_function&quot;</span><span class="p">,</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;_logicalmask&quot;</span><span class="p">,</span> <span class="s2">&quot;logicalmask&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;_transformation&quot;</span><span class="p">,</span> <span class="s2">&quot;transformation&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="s2">&quot;_source&quot;</span><span class="p">,</span> <span class="s2">&quot;dataname&quot;</span><span class="p">,</span> <span class="s2">&quot;_dataname&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;_title&quot;</span><span class="p">,</span> <span class="s2">&quot;units&quot;</span><span class="p">,</span> <span class="s2">&quot;_units&quot;</span><span class="p">,</span> <span class="s2">&quot;_crdate&quot;</span><span class="p">,</span> <span class="s2">&quot;crdate&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;crtime&quot;</span><span class="p">,</span> <span class="s2">&quot;_crtime&quot;</span><span class="p">,</span> <span class="s2">&quot;_comment1&quot;</span><span class="p">,</span> <span class="s2">&quot;comment1&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;comment2&quot;</span><span class="p">,</span> <span class="s2">&quot;_comment2&quot;</span><span class="p">,</span> <span class="s2">&quot;_comment3&quot;</span><span class="p">,</span> <span class="s2">&quot;comment3&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;_comment4&quot;</span><span class="p">,</span> <span class="s2">&quot;comment4&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;xname&quot;</span><span class="p">,</span> <span class="s2">&quot;yname&quot;</span><span class="p">,</span> <span class="s2">&quot;zname&quot;</span><span class="p">,</span> <span class="s2">&quot;tname&quot;</span><span class="p">,</span> <span class="s2">&quot;xunits&quot;</span><span class="p">,</span> <span class="s2">&quot;yunits&quot;</span><span class="p">,</span> <span class="s2">&quot;zunits&quot;</span><span class="p">,</span> <span class="s2">&quot;tunits&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;xvalue&quot;</span><span class="p">,</span> <span class="s2">&quot;zvalue&quot;</span><span class="p">,</span> <span class="s2">&quot;yvalue&quot;</span><span class="p">,</span> <span class="s2">&quot;tvalue&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;xtic1&quot;</span><span class="p">,</span> <span class="s2">&quot;xtic2&quot;</span><span class="p">,</span> <span class="s2">&quot;xmintic1&quot;</span><span class="p">,</span> <span class="s2">&quot;xmintic2&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;ytic1&quot;</span><span class="p">,</span> <span class="s2">&quot;ytic2&quot;</span><span class="p">,</span> <span class="s2">&quot;ymintic1&quot;</span><span class="p">,</span> <span class="s2">&quot;ymintic2&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;xlabel1&quot;</span><span class="p">,</span> <span class="s2">&quot;xlabel2&quot;</span><span class="p">,</span> <span class="s2">&quot;box1&quot;</span><span class="p">,</span> <span class="s2">&quot;box2&quot;</span><span class="p">,</span> <span class="s2">&quot;box3&quot;</span><span class="p">,</span> <span class="s2">&quot;box4&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;ylabel1&quot;</span><span class="p">,</span> <span class="s2">&quot;ylabel2&quot;</span><span class="p">,</span> <span class="s2">&quot;line1&quot;</span><span class="p">,</span> <span class="s2">&quot;line2&quot;</span><span class="p">,</span> <span class="s2">&quot;line3&quot;</span><span class="p">,</span> <span class="s2">&quot;line4&quot;</span><span class="p">,</span> <span class="s2">&quot;legend&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;_xname&quot;</span><span class="p">,</span> <span class="s2">&quot;_yname&quot;</span><span class="p">,</span> <span class="s2">&quot;_zname&quot;</span><span class="p">,</span> <span class="s2">&quot;_tname&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;_xunits&quot;</span><span class="p">,</span> <span class="s2">&quot;_yunits&quot;</span><span class="p">,</span> <span class="s2">&quot;_zunits&quot;</span><span class="p">,</span> <span class="s2">&quot;_tunits&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;_xvalue&quot;</span><span class="p">,</span> <span class="s2">&quot;_zvalue&quot;</span><span class="p">,</span> <span class="s2">&quot;_yvalue&quot;</span><span class="p">,</span> <span class="s2">&quot;_tvalue&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;_mean&quot;</span><span class="p">,</span> <span class="s2">&quot;_min&quot;</span><span class="p">,</span> <span class="s2">&quot;_max&quot;</span><span class="p">,</span> <span class="s2">&quot;_xtic1&quot;</span><span class="p">,</span> <span class="s2">&quot;_xtic2&quot;</span><span class="p">,</span> <span class="s2">&quot;_xmintic1&quot;</span><span class="p">,</span> <span class="s2">&quot;_xmintic2&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;_ytic1&quot;</span><span class="p">,</span> <span class="s2">&quot;_ytic2&quot;</span><span class="p">,</span> <span class="s2">&quot;_ymintic1&quot;</span><span class="p">,</span> <span class="s2">&quot;_ymintic2&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;_xlabel1&quot;</span><span class="p">,</span> <span class="s2">&quot;_xlabel2&quot;</span><span class="p">,</span> <span class="s2">&quot;_box1&quot;</span><span class="p">,</span> <span class="s2">&quot;_box2&quot;</span><span class="p">,</span> <span class="s2">&quot;_box3&quot;</span><span class="p">,</span> <span class="s2">&quot;_box4&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;_ylabel1&quot;</span><span class="p">,</span> <span class="s2">&quot;_ylabel2&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;_line1&quot;</span><span class="p">,</span> <span class="s2">&quot;_line2&quot;</span><span class="p">,</span> <span class="s2">&quot;_line3&quot;</span><span class="p">,</span> <span class="s2">&quot;_line4&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;_legend&quot;</span><span class="p">,</span> <span class="s2">&quot;_data&quot;</span><span class="p">,</span> <span class="s2">&quot;_scaledFont&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_getName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
    <span class="n">name</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_getName</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getOrientation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_orientation</span>

    <span class="k">def</span> <span class="nf">_setOrientation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;default&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You cannot change the default template&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">VCS_validation_functions</span><span class="o">.</span><span class="n">checkInt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;orientation&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;The orientation attribute must be an integer (i.e., 0 = landscape, 1 = portrait).&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_orientation</span> <span class="o">=</span> <span class="n">value</span>
    <span class="n">orientation</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">_getOrientation</span><span class="p">,</span>
        <span class="n">_setOrientation</span><span class="p">,</span>
        <span class="s2">&quot;The orientation attribute must be an integer (i.e., 0 = landscape, 1 = portrait).&quot;</span><span class="p">)</span>

    <span class="c1"># Initialize the template attributes.                                     #</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Pic_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Pic_name_src</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">):</span>
            <span class="c1">#                                                         #</span>
            <span class="c1">###########################################################</span>
            <span class="c1"># Initialize the template class and its members           #</span>
            <span class="c1">#                                                         #</span>
            <span class="c1"># The getPmember function retrieves the values of the     #</span>
            <span class="c1"># template members in the C structure and passes back the #</span>
            <span class="c1"># appropriate Python Object.                              #</span>
            <span class="c1">###########################################################</span>
            <span class="c1">#                                                         #</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">Pic_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Must provide a template name.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Pic_name_src</span> <span class="o">!=</span> <span class="s2">&quot;default&quot;</span> <span class="ow">and</span> <span class="n">Pic_name_src</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span>
                <span class="s2">&quot;template&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="s2">&quot;Invalid source template: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">Pic_name_src</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">Pic_name_src</span><span class="p">,</span> <span class="n">P</span><span class="p">):</span>
            <span class="n">Pic_name_src</span> <span class="o">=</span> <span class="n">Pic_name_src</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="n">Pic_name</span> <span class="ow">in</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;template&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Template </span><span class="si">%s</span><span class="s2"> already exists&quot;</span> <span class="o">%</span> <span class="n">Pic_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">Pic_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">p_name</span> <span class="o">=</span> <span class="s1">&#39;P&#39;</span>
        <span class="c1"># properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">file</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">),</span>
                                       <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">function</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;function&quot;</span><span class="p">),</span>
                                           <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">logicalmask</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;logicalmask&quot;</span><span class="p">),</span>
                                              <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;logicalmask&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">transformation</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;transformation&quot;</span><span class="p">),</span>
                                                 <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;transformation&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">),</span>
                                         <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">dataname</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;dataname&quot;</span><span class="p">),</span>
                                           <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;dataname&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">),</span>
                                        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;units&quot;</span><span class="p">),</span>
                                        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;units&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">crdate</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;crdate&quot;</span><span class="p">),</span>
                                         <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;crdate&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">crtime</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;crtime&quot;</span><span class="p">),</span>
                                         <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;crtime&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">comment1</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;comment1&quot;</span><span class="p">),</span>
                                           <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;comment1&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">comment2</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;comment2&quot;</span><span class="p">),</span>
                                           <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;comment2&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">comment3</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;comment3&quot;</span><span class="p">),</span>
                                           <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;comment3&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">comment4</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;comment4&quot;</span><span class="p">),</span>
                                           <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;comment4&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">xname</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xname&quot;</span><span class="p">),</span>
                                        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xname&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">yname</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;yname&quot;</span><span class="p">),</span>
                                        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;yname&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">zname</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;zname&quot;</span><span class="p">),</span>
                                        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;zname&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">tname</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;tname&quot;</span><span class="p">),</span>
                                        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;tname&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">xunits</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xunits&quot;</span><span class="p">),</span>
                                         <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xunits&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">yunits</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;yunits&quot;</span><span class="p">),</span>
                                         <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;yunits&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">zunits</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;zunits&quot;</span><span class="p">),</span>
                                         <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;zunits&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">tunits</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;tunits&quot;</span><span class="p">),</span>
                                         <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;tunits&quot;</span><span class="p">,</span> <span class="n">Pt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">xvalue</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xvalue&quot;</span><span class="p">),</span>
                                         <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xvalue&quot;</span><span class="p">,</span> <span class="n">Pf</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">yvalue</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;yvalue&quot;</span><span class="p">),</span>
                                         <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;yvalue&quot;</span><span class="p">,</span> <span class="n">Pf</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">zvalue</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;zvalue&quot;</span><span class="p">),</span>
                                         <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;zvalue&quot;</span><span class="p">,</span> <span class="n">Pf</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">tvalue</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;tvalue&quot;</span><span class="p">),</span>
                                         <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;tvalue&quot;</span><span class="p">,</span> <span class="n">Pf</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">mean</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">),</span>
                                       <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="n">Pf</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">min</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">),</span>
                                      <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="n">Pf</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">max</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">),</span>
                                      <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="n">Pf</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">xtic1</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xtic1&quot;</span><span class="p">),</span>
                                        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xtic1&quot;</span><span class="p">,</span> <span class="n">Pxt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">xtic2</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xtic2&quot;</span><span class="p">),</span>
                                        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xtic2&quot;</span><span class="p">,</span> <span class="n">Pxt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">xmintic1</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xmintic1&quot;</span><span class="p">),</span>
                                           <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xmintic1&quot;</span><span class="p">,</span> <span class="n">Pxt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">xmintic2</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xmintic2&quot;</span><span class="p">),</span>
                                           <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xmintic2&quot;</span><span class="p">,</span> <span class="n">Pxt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">ytic1</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;ytic1&quot;</span><span class="p">),</span>
                                        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;ytic1&quot;</span><span class="p">,</span> <span class="n">Pyt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">ytic2</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;ytic2&quot;</span><span class="p">),</span>
                                        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;ytic2&quot;</span><span class="p">,</span> <span class="n">Pyt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">ymintic1</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;ymintic1&quot;</span><span class="p">),</span>
                                           <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;ymintic1&quot;</span><span class="p">,</span> <span class="n">Pyt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">ymintic2</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;ymintic2&quot;</span><span class="p">),</span>
                                           <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;ymintic2&quot;</span><span class="p">,</span> <span class="n">Pyt</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">xlabel1</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xlabel1&quot;</span><span class="p">),</span>
                                          <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xlabel1&quot;</span><span class="p">,</span> <span class="n">Pxl</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">xlabel2</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xlabel2&quot;</span><span class="p">),</span>
                                          <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;xlabel2&quot;</span><span class="p">,</span> <span class="n">Pxl</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">ylabel1</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;ylabel1&quot;</span><span class="p">),</span>
                                          <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;ylabel1&quot;</span><span class="p">,</span> <span class="n">Pyl</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">ylabel2</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;ylabel2&quot;</span><span class="p">),</span>
                                          <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;ylabel2&quot;</span><span class="p">,</span> <span class="n">Pyl</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">box1</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;box1&quot;</span><span class="p">),</span>
                                       <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;box1&quot;</span><span class="p">,</span> <span class="n">Pbl</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">box2</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;box2&quot;</span><span class="p">),</span>
                                       <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;box2&quot;</span><span class="p">,</span> <span class="n">Pbl</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">box3</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;box3&quot;</span><span class="p">),</span>
                                       <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;box3&quot;</span><span class="p">,</span> <span class="n">Pbl</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">box4</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;box4&quot;</span><span class="p">),</span>
                                       <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;box4&quot;</span><span class="p">,</span> <span class="n">Pbl</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">line1</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;line1&quot;</span><span class="p">),</span>
                                        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;line1&quot;</span><span class="p">,</span> <span class="n">Pbl</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">line2</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;line2&quot;</span><span class="p">),</span>
                                        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;line2&quot;</span><span class="p">,</span> <span class="n">Pbl</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">line3</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;line3&quot;</span><span class="p">),</span>
                                        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;line3&quot;</span><span class="p">,</span> <span class="n">Pbl</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">line4</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;line4&quot;</span><span class="p">),</span>
                                        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;line4&quot;</span><span class="p">,</span> <span class="n">Pbl</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">legend</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;legend&quot;</span><span class="p">),</span>
                                         <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;legend&quot;</span><span class="p">,</span> <span class="n">Pls</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_getgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">),</span>
                                       <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">_setgen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">Pds</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="c1">#################################################</span>
        <span class="c1"># The following initializes the template&#39;s TEXT #</span>
        <span class="c1">#################################################</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scaledFont</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">Pic_name</span> <span class="o">==</span> <span class="s2">&quot;default&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_orientation</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_file</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_function</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logicalmask</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;logicalmask&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transformation</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;transformation&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_source</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dataname</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;dataname&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_units</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;units&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_crdate</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;crdate&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_crtime</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;crtime&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_comment1</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;comment1&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_comment2</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;comment2&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_comment3</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;comment3&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_comment4</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;comment4&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xname</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;xname&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_yname</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;yname&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_zname</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;zname&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tname</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;tname&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xunits</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;xunits&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_yunits</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;yunits&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_zunits</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;zunits&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tunits</span> <span class="o">=</span> <span class="n">Pt</span><span class="p">(</span><span class="s1">&#39;tunits&#39;</span><span class="p">)</span>
            <span class="c1">####################################################</span>
        <span class="c1"># The following initializes the template&#39;s FORMATS #</span>
            <span class="c1">####################################################</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xvalue</span> <span class="o">=</span> <span class="n">Pf</span><span class="p">(</span><span class="s1">&#39;xvalue&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_yvalue</span> <span class="o">=</span> <span class="n">Pf</span><span class="p">(</span><span class="s1">&#39;yvalue&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_zvalue</span> <span class="o">=</span> <span class="n">Pf</span><span class="p">(</span><span class="s1">&#39;zvalue&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tvalue</span> <span class="o">=</span> <span class="n">Pf</span><span class="p">(</span><span class="s1">&#39;tvalue&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mean</span> <span class="o">=</span> <span class="n">Pf</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_min</span> <span class="o">=</span> <span class="n">Pf</span><span class="p">(</span><span class="s1">&#39;min&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_max</span> <span class="o">=</span> <span class="n">Pf</span><span class="p">(</span><span class="s1">&#39;max&#39;</span><span class="p">)</span>
            <span class="c1">#########################################################</span>
        <span class="c1"># The following initializes the template&#39;s X-TICK MARKS #</span>
            <span class="c1">#########################################################</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xtic1</span> <span class="o">=</span> <span class="n">Pxt</span><span class="p">(</span><span class="s1">&#39;xtic1&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xtic2</span> <span class="o">=</span> <span class="n">Pxt</span><span class="p">(</span><span class="s1">&#39;xtic2&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xmintic1</span> <span class="o">=</span> <span class="n">Pxt</span><span class="p">(</span><span class="s1">&#39;xmintic1&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xmintic2</span> <span class="o">=</span> <span class="n">Pxt</span><span class="p">(</span><span class="s1">&#39;xmintic2&#39;</span><span class="p">)</span>
            <span class="c1">#########################################################</span>
        <span class="c1"># The following initializes the template&#39;s Y-TICK MARKS #</span>
            <span class="c1">#########################################################</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ytic1</span> <span class="o">=</span> <span class="n">Pyt</span><span class="p">(</span><span class="s1">&#39;ytic1&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ytic2</span> <span class="o">=</span> <span class="n">Pyt</span><span class="p">(</span><span class="s1">&#39;ytic2&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ymintic1</span> <span class="o">=</span> <span class="n">Pyt</span><span class="p">(</span><span class="s1">&#39;ymintic1&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ymintic2</span> <span class="o">=</span> <span class="n">Pyt</span><span class="p">(</span><span class="s1">&#39;ymintic2&#39;</span><span class="p">)</span>
            <span class="c1">#####################################################</span>
        <span class="c1"># The following initializes the template&#39;s X-LABELS #</span>
            <span class="c1">#####################################################</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xlabel1</span> <span class="o">=</span> <span class="n">Pxl</span><span class="p">(</span><span class="s1">&#39;xlabel1&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xlabel2</span> <span class="o">=</span> <span class="n">Pxl</span><span class="p">(</span><span class="s1">&#39;xlabel2&#39;</span><span class="p">)</span>
            <span class="c1">#####################################################</span>
        <span class="c1"># The following initializes the template&#39;s Y-LABELS #</span>
            <span class="c1">#####################################################</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ylabel1</span> <span class="o">=</span> <span class="n">Pyl</span><span class="p">(</span><span class="s1">&#39;ylabel1&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ylabel2</span> <span class="o">=</span> <span class="n">Pyl</span><span class="p">(</span><span class="s1">&#39;ylabel2&#39;</span><span class="p">)</span>
            <span class="c1">############################################################</span>
        <span class="c1"># The following initializes the template&#39;s BOXES and LINES #</span>
            <span class="c1">############################################################</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_box1</span> <span class="o">=</span> <span class="n">Pbl</span><span class="p">(</span><span class="s1">&#39;box1&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_box2</span> <span class="o">=</span> <span class="n">Pbl</span><span class="p">(</span><span class="s1">&#39;box2&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_box3</span> <span class="o">=</span> <span class="n">Pbl</span><span class="p">(</span><span class="s1">&#39;box3&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_box4</span> <span class="o">=</span> <span class="n">Pbl</span><span class="p">(</span><span class="s1">&#39;box4&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_line1</span> <span class="o">=</span> <span class="n">Pbl</span><span class="p">(</span><span class="s1">&#39;line1&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_line2</span> <span class="o">=</span> <span class="n">Pbl</span><span class="p">(</span><span class="s1">&#39;line2&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_line3</span> <span class="o">=</span> <span class="n">Pbl</span><span class="p">(</span><span class="s1">&#39;line3&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_line4</span> <span class="o">=</span> <span class="n">Pbl</span><span class="p">(</span><span class="s1">&#39;line4&#39;</span><span class="p">)</span>
            <span class="c1">#########################################################</span>
        <span class="c1"># The following initializes the template&#39;s LEGEND SPACE #</span>
            <span class="c1">#########################################################</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_legend</span> <span class="o">=</span> <span class="n">Pls</span><span class="p">(</span><span class="s1">&#39;legend&#39;</span><span class="p">)</span>
            <span class="c1">#######################################################</span>
        <span class="c1"># The following initializes the template&#39;s DATA SPACE #</span>
            <span class="c1">#######################################################</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">Pds</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">Pic_name_src</span><span class="p">,</span> <span class="n">P</span><span class="p">):</span>
                <span class="n">Pic_name_src</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">name</span>
            <span class="k">if</span> <span class="n">Pic_name_src</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;template&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;The source template &#39;</span><span class="si">%s</span><span class="s2">&#39; does not seem to exists&quot;</span> <span class="o">%</span>
                    <span class="n">Pic_name_src</span><span class="p">)</span>
            <span class="n">src</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;template&quot;</span><span class="p">][</span><span class="n">Pic_name_src</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">orientation</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">file</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">function</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logicalmask</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">logicalmask</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transformation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">transformation</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">source</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dataname</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">dataname</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crdate</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">crdate</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crtime</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">crtime</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment1</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">comment1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">comment2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment3</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">comment3</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment4</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">comment4</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xname</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">xname</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yname</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">yname</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zname</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">zname</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tname</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">tname</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xunits</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">xunits</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yunits</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">yunits</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zunits</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">zunits</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tunits</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">tunits</span><span class="p">)</span>
            <span class="c1">###################################################</span>
        <span class="c1"># The following initializes the template&#39;s FORMATS #</span>
            <span class="c1">####################################################</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xvalue</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">xvalue</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yvalue</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">yvalue</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zvalue</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">zvalue</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tvalue</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">tvalue</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mean</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">min</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">max</span><span class="p">)</span>
            <span class="c1">########################################################</span>
        <span class="c1"># The folowing initializes the template&#39;s X-TICK MARKS #</span>
            <span class="c1">########################################################</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xtic1</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">xtic1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xtic2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">xtic2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xmintic1</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">xmintic1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xmintic2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">xmintic2</span><span class="p">)</span>
            <span class="c1">########################################################</span>
        <span class="c1"># The folowing initializes the template&#39;s Y-TICK MARKS #</span>
            <span class="c1">########################################################</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ytic1</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">ytic1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ytic2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">ytic2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ymintic1</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">ymintic1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ymintic2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">ymintic2</span><span class="p">)</span>
            <span class="c1">####################################################</span>
        <span class="c1"># The folowing initializes the template&#39;s X-LABELS #</span>
            <span class="c1">####################################################</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xlabel1</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">xlabel1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xlabel2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">xlabel2</span><span class="p">)</span>
            <span class="c1">####################################################</span>
        <span class="c1"># The folowing initializes the template&#39;s Y-LABELS #</span>
            <span class="c1">####################################################</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ylabel1</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">ylabel1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ylabel2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">ylabel2</span><span class="p">)</span>
            <span class="c1">###########################################################</span>
        <span class="c1"># The folowing initializes the template&#39;s BOXES and LINES #</span>
            <span class="c1">###########################################################</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box1</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">box1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">box2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box3</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">box3</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box4</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">box4</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line1</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">line1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">line2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line3</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">line3</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line4</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">line4</span><span class="p">)</span>
            <span class="c1">########################################################</span>
        <span class="c1"># The folowing initializes the template&#39;s LEGEND SPACE #</span>
            <span class="c1">########################################################</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legend</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">legend</span><span class="p">)</span>
            <span class="c1">######################################################</span>
        <span class="c1"># The folowing initializes the template&#39;s DATA SPACE #</span>
            <span class="c1">#######################################################</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

        <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;template&quot;</span><span class="p">][</span><span class="n">Pic_name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">single</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;__removed_from_VCS__&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;This instance has been removed from VCS.&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">single</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="nb">print</span> <span class="s2">&quot;----------Template (P) member &quot;</span> <span class="o">+</span>\
                <span class="s2">&quot;(attribute) listings ----------&quot;</span>
            <span class="nb">print</span> <span class="s2">&quot;method =&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_name</span>
            <span class="nb">print</span> <span class="s2">&quot;name =&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
            <span class="nb">print</span> <span class="s2">&quot;orientation =&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logicalmask</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transformation</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dataname</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crdate</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crtime</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment3</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment4</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xname</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yname</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zname</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tname</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xunits</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yunits</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zunits</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tunits</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xvalue</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yvalue</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zvalue</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tvalue</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mean</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xtic1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xtic2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xmintic1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xmintic2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ytic1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ytic2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ymintic1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ymintic2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xlabel1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xlabel2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ylabel1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ylabel2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box3</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box4</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line3</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line4</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">((</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;text&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;Pt&#39;</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logicalmask</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transformation</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dataname</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crdate</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crtime</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment3</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment4</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xname</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yname</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zname</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tname</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xunits</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yunits</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zunits</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tunits</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">((</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;format&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;Pf&#39;</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xvalue</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yvalue</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zvalue</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tvalue</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mean</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">((</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;xtickmarks&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;Pxt&#39;</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xtic1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xtic2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xmintic1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xmintic2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">((</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;ytickmarks&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;Pyt&#39;</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ytic1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ytic2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ymintic1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ymintic2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">((</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;xlabels&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;Pxl&#39;</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xlabel1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xlabel2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">((</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;ylabels&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;Pyl&#39;</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ylabel1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ylabel2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">((</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;boxeslines&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;Pbl&#39;</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box3</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box4</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line3</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line4</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">((</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;legend&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;Pls&#39;</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">((</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;Pds&#39;</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;file&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;function&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;logicalmask&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logicalmask</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;transformation&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transformation</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;source&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;name&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;title&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;units&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;crdate&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crdate</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;crtime&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crtime</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;comment1&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;comment2&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;comment3&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment3</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;comment4&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment4</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;xname&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xname</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;yname&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yname</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;zname&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zname</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;tname&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tname</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;xunits&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xunits</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;yunits&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yunits</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;zunits&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zunits</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;tunits&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tunits</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;xvalue&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xvalue</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;yvalue&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yvalue</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;zvalue&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zvalue</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;tvalue&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tvalue</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;mean&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mean</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;max&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;xtic1&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xtic1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;xtic2&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xtic2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;xmintic1&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xmintic1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;xmintic2&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xmintic2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;ytic1&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ytic1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;ytic2&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ytic2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;ymintic1&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ymintic1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;ymintic2&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ymintic2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;xlabel1&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xlabel1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;xlabel2&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xlabel2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;ylabel1&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ylabel1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;ylabel2&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ylabel2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;box1&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;box2&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;box3&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box3</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;box4&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box4</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;line1&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line1</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;line2&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;line3&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line3</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;line4&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line4</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;legend&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">single</span> <span class="o">==</span> <span class="s1">&#39;data&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>

    <span class="c1">###########################################################################</span>
    <span class="c1">#                                                                         #</span>
    <span class="c1"># Script out template object in VCS to a file.                            #</span>
    <span class="c1">#                                                                         #</span>
    <span class="c1">###########################################################################</span>
<div class="viewcode-block" id="P.script"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.P.script">[docs]</a>    <span class="k">def</span> <span class="nf">script</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">script_filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">script_filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Error - Must provide an output script file name.&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">mode</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Error - Mode can only be &quot;w&quot; for replace or &quot;a&quot; for append.&#39;</span><span class="p">)</span>

        <span class="c1"># By default, save file in json</span>
        <span class="n">scr_type</span> <span class="o">=</span> <span class="n">script_filename</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">scr_type</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">scr_type</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">scr_type</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span>
            <span class="k">if</span> <span class="n">script_filename</span> <span class="o">!=</span> <span class="s2">&quot;initial.attributes&quot;</span><span class="p">:</span>
                <span class="n">script_filename</span> <span class="o">+=</span> <span class="s2">&quot;.json&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">scr_type</span> <span class="o">=</span> <span class="n">scr_type</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">scr_type</span> <span class="o">==</span> <span class="s1">&#39;.scr&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">DeprecationWarning</span><span class="p">(</span><span class="s2">&quot;scr script are no longer generated&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">scr_type</span> <span class="o">==</span> <span class="s2">&quot;py&quot;</span><span class="p">:</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span> <span class="o">+</span> <span class="s1">&#39;+&#39;</span>
            <span class="n">py_type</span> <span class="o">=</span> <span class="n">script_filename</span><span class="p">[</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">script_filename</span><span class="p">)</span> <span class="o">-</span>
                <span class="mi">3</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">script_filename</span><span class="p">)]</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">py_type</span> <span class="o">!=</span> <span class="s1">&#39;.py&#39;</span><span class="p">):</span>
                <span class="n">script_filename</span> <span class="o">=</span> <span class="n">script_filename</span> <span class="o">+</span> <span class="s1">&#39;.py&#39;</span>

            <span class="c1"># Write to file</span>
            <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">script_filename</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>  <span class="c1"># Must be a new file, so include below</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;#####################################</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;#                                 #</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;# Import and Initialize VCS     #</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;#                             #</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;#############################</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;import vcs</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;v=vcs.init()</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">unique_name</span> <span class="o">=</span> <span class="s1">&#39;__P__&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                <span class="s2">&quot;#----------Template (P) member &quot;</span>
                <span class="s2">&quot;(attribute) listings ----------</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;p_list=v.listelements(&#39;template&#39;)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;if (&#39;</span><span class="si">%s</span><span class="s2">&#39; in p_list):</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                <span class="s2">&quot;   </span><span class="si">%s</span><span class="s2"> = v.gettemplate(&#39;</span><span class="si">%s</span><span class="s2">&#39;)</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;else:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                <span class="s2">&quot;   </span><span class="si">%s</span><span class="s2"> = v.createtemplate(&#39;</span><span class="si">%s</span><span class="s2">&#39;)</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;orientation = &#39;</span><span class="si">%d</span><span class="s2">&#39;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span><span class="p">)</span>
        <span class="c1"># Write out the TEXT template</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">a</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logicalmask</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">transformation</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dataname</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">crdate</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">crtime</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">comment1</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">comment2</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">comment3</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">comment4</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xname</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">yname</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">zname</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tname</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xunits</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">yunits</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">zunits</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tunits</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="s1">&#39;function&#39;</span><span class="p">,</span> <span class="s1">&#39;logicalmask&#39;</span><span class="p">,</span> <span class="s1">&#39;transformation&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="s1">&#39;dataname&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">,</span> <span class="s1">&#39;crdate&#39;</span><span class="p">,</span> <span class="s1">&#39;crtime&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;comment1&#39;</span><span class="p">,</span> <span class="s1">&#39;comment2&#39;</span><span class="p">,</span> <span class="s1">&#39;comment3&#39;</span><span class="p">,</span> <span class="s1">&#39;comment4&#39;</span><span class="p">,</span> <span class="s1">&#39;xname&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;yname&#39;</span><span class="p">,</span> <span class="s1">&#39;zname&#39;</span><span class="p">,</span> <span class="s1">&#39;tname&#39;</span><span class="p">,</span> <span class="s1">&#39;xunits&#39;</span><span class="p">,</span> <span class="s1">&#39;yunits&#39;</span><span class="p">,</span> <span class="s1">&#39;zunits&#39;</span><span class="p">,</span> <span class="s1">&#39;tunits&#39;</span><span class="p">):</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;# member = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.priority = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">priority</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.x = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.y = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.texttable = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">texttable</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.textorientation = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">textorientation</span><span class="p">))</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="c1"># Write out the FORMAT template</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">a</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xvalue</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">yvalue</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">zvalue</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tvalue</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span>
                    <span class="s1">&#39;xvalue&#39;</span><span class="p">,</span> <span class="s1">&#39;yvalue&#39;</span><span class="p">,</span> <span class="s1">&#39;zvalue&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;tvalue&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">):</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;# member = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.priority = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">priority</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.x = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.y = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.texttable = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">format</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.texttable = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">texttable</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.textorientation = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">textorientation</span><span class="p">))</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="c1"># Write out the X-TICK template</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">xtic1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtic2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmintic1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmintic2</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;xtic1&#39;</span><span class="p">,</span> <span class="s1">&#39;xtic2&#39;</span><span class="p">,</span> <span class="s1">&#39;xmintic1&#39;</span><span class="p">,</span> <span class="s1">&#39;xmintic2&#39;</span><span class="p">):</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;# member = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.priority = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">priority</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.y1 = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">y1</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.y2 = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">y2</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.line = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">line</span><span class="p">))</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="c1"># Write out the Y-TICK template</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ytic1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ytic2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ymintic1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ymintic2</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;ytic1&#39;</span><span class="p">,</span> <span class="s1">&#39;ytic2&#39;</span><span class="p">,</span> <span class="s1">&#39;ymintic1&#39;</span><span class="p">,</span> <span class="s1">&#39;ymintic2&#39;</span><span class="p">):</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;# member = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.priority = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">priority</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.x1 = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">x1</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.x2 = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">x2</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.line = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">line</span><span class="p">))</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="c1"># Write out the X-LABELS template</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">xlabel1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xlabel2</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;xlabel1&#39;</span><span class="p">,</span> <span class="s1">&#39;xlabel2&#39;</span><span class="p">):</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;# member = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.priority = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">priority</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.y = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.texttable = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">texttable</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.textorientation = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">textorientation</span><span class="p">))</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="c1"># Write out the Y-LABELS template</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ylabel1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ylabel2</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;ylabel1&#39;</span><span class="p">,</span> <span class="s1">&#39;ylabel2&#39;</span><span class="p">):</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;# member = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.priority = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">priority</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.x = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.texttable = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">texttable</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.textorientation = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">textorientation</span><span class="p">))</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="c1"># Write out the BOXES and LINES template</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">a</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">box1</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">box2</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">box1</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">box2</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">line1</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">line2</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">line3</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">line4</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;box1&#39;</span><span class="p">,</span> <span class="s1">&#39;box2&#39;</span><span class="p">,</span> <span class="s1">&#39;box3&#39;</span><span class="p">,</span> <span class="s1">&#39;box4&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;line1&#39;</span><span class="p">,</span> <span class="s1">&#39;line2&#39;</span><span class="p">,</span> <span class="s1">&#39;line3&#39;</span><span class="p">,</span> <span class="s1">&#39;line4&#39;</span><span class="p">):</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;# member = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.priority = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">priority</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.x1 = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">x1</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.y1 = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">y1</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.x2 = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">x2</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.y2 = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">y2</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.line = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">line</span><span class="p">))</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="c1"># Write out the LEGEND SPACE template</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;# member = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="s1">&#39;legend&#39;</span><span class="p">)</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.legend.priority = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">priority</span><span class="p">))</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.legend.x1 = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">x1</span><span class="p">))</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.legend.y1 = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">y1</span><span class="p">))</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.legend.x2 = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">x2</span><span class="p">))</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.legend.y2 = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">y2</span><span class="p">))</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.legend.line = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">line</span><span class="p">))</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.legend.texttable = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">texttable</span><span class="p">))</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.legend.textorientation = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">textorientation</span><span class="p">))</span>

        <span class="c1"># Write out the DATA SPACE template</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;# member = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.data.priority = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">priority</span><span class="p">))</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.data.x1 = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">x1</span><span class="p">))</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.data.y1 = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">y1</span><span class="p">))</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.data.x2 = </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">x2</span><span class="p">))</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.data.y2 = </span><span class="si">%g</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">unique_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">y2</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Json type</span>
            <span class="n">mode</span> <span class="o">+=</span> <span class="s2">&quot;+&quot;</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">script_filename</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
            <span class="n">vcs</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">dumpToJson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>
    <span class="n">script</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="n">scriptdocs</span><span class="p">[</span><span class="s1">&#39;template&#39;</span><span class="p">]</span>

    <span class="c1"># Adding the drawing functionnality to plot all these attributes on the</span>
    <span class="c1"># Canvas</span>
<div class="viewcode-block" id="P.drawTicks"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.P.drawTicks">[docs]</a>    <span class="k">def</span> <span class="nf">drawTicks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slab</span><span class="p">,</span> <span class="n">gm</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span>
                  <span class="n">vp</span><span class="p">,</span> <span class="n">wc</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws the ticks for the axis x number number</span>
<span class="sd">        using the label passed by the graphic  method</span>
<span class="sd">        vp and wc are from the actual canvas, they have</span>
<span class="sd">        been reset when they get here...</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">kargs</span><span class="p">[</span><span class="s2">&quot;donotstoredisplay&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">X</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">X</span> <span class="o">=</span> <span class="n">slab</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">Y</span> <span class="o">=</span> <span class="n">slab</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">displays</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">wc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="n">wc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">wc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">dx</span> <span class="o">/</span> <span class="p">(</span><span class="n">vp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vp</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="n">dy</span> <span class="o">/</span> <span class="p">(</span><span class="n">vp</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">vp</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="c1"># get the actual labels</span>
        <span class="n">loc</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">gm</span><span class="p">,</span> <span class="n">axis</span> <span class="o">+</span> <span class="s1">&#39;ticlabels&#39;</span> <span class="o">+</span> <span class="n">number</span><span class="p">))</span>
        <span class="c1"># Are they set or do we need to it ?</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">loc</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">loc</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span><span class="p">):</span>
                <span class="c1"># well i guess we have to do it !</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span>
                <span class="n">x1</span> <span class="o">=</span> <span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">x2</span> <span class="o">=</span> <span class="n">wc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x1</span> <span class="o">=</span> <span class="n">wc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">x2</span> <span class="o">=</span> <span class="n">wc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">mkscale</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">mklabels</span><span class="p">(</span><span class="n">loc</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">number</span> <span class="o">==</span> <span class="s1">&#39;2&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">loc</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">loc</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="p">{}))</span>
        <span class="c1"># Make sure the label passed are not outside the world coordinates</span>
        <span class="n">dw1</span> <span class="o">=</span> <span class="mf">1.E20</span>
        <span class="n">dw2</span> <span class="o">=</span> <span class="mf">1.E20</span>

        <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span>
            <span class="n">dw1</span><span class="p">,</span> <span class="n">dw2</span> <span class="o">=</span> <span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">wc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dw1</span><span class="p">,</span> <span class="n">dw2</span> <span class="o">=</span> <span class="n">wc</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">wc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">loc</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">dw2</span> <span class="o">&gt;</span> <span class="n">dw1</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">dw1</span> <span class="o">&lt;=</span> <span class="n">k</span> <span class="o">&lt;=</span> <span class="n">dw2</span><span class="p">):</span>
                    <span class="k">del</span><span class="p">(</span><span class="n">loc</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">dw1</span> <span class="o">&gt;=</span> <span class="n">k</span> <span class="o">&gt;=</span> <span class="n">dw2</span><span class="p">):</span>
                    <span class="k">del</span><span class="p">(</span><span class="n">loc</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
        <span class="c1"># The ticks</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span> <span class="o">+</span> <span class="s1">&#39;tic&#39;</span> <span class="o">+</span> <span class="n">number</span><span class="p">)</span>
        <span class="c1"># the labels</span>
        <span class="n">objlabl</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span> <span class="o">+</span> <span class="s1">&#39;label&#39;</span> <span class="o">+</span> <span class="n">number</span><span class="p">)</span>
        <span class="c1"># the following to make sure we have a unique name,</span>
        <span class="c1"># i put them together assuming it would be faster</span>
        <span class="n">ticks</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">createline</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">obj</span><span class="o">.</span><span class="n">line</span><span class="p">)</span>
        <span class="n">ticks</span><span class="o">.</span><span class="n">projection</span> <span class="o">=</span> <span class="n">gm</span><span class="o">.</span><span class="n">projection</span>
        <span class="n">ticks</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">priority</span>
        <span class="n">tt</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">createtext</span><span class="p">(</span>
            <span class="n">Tt_source</span><span class="o">=</span><span class="n">objlabl</span><span class="o">.</span><span class="n">texttable</span><span class="p">,</span>
            <span class="n">To_source</span><span class="o">=</span><span class="n">objlabl</span><span class="o">.</span><span class="n">textorientation</span><span class="p">)</span>
        <span class="n">tt</span><span class="o">.</span><span class="n">projection</span> <span class="o">=</span> <span class="n">gm</span><span class="o">.</span><span class="n">projection</span>
        <span class="n">tt</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="n">objlabl</span><span class="o">.</span><span class="n">priority</span>
        <span class="k">if</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;projection&quot;</span><span class="p">][</span><span class="n">gm</span><span class="o">.</span><span class="n">projection</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s2">&quot;linear&quot;</span><span class="p">:</span>
            <span class="n">ticks</span><span class="o">.</span><span class="n">viewport</span> <span class="o">=</span> <span class="n">vp</span>
            <span class="n">ticks</span><span class="o">.</span><span class="n">worldcoordinate</span> <span class="o">=</span> <span class="n">wc</span>
            <span class="n">tt</span><span class="o">.</span><span class="n">worldcoordinate</span> <span class="o">=</span> <span class="n">wc</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span>
                <span class="n">tt</span><span class="o">.</span><span class="n">viewport</span> <span class="o">=</span> <span class="n">vp</span>
                <span class="c1"># TODO: Transform axes names through geographic projections</span>
                <span class="c1"># In that case the if goes and only the statement stays</span>
                <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;ratio_autot_viewport&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kargs</span><span class="p">):</span>
                    <span class="n">tt</span><span class="o">.</span><span class="n">viewport</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">objlabl</span><span class="o">.</span><span class="n">x</span>
                <span class="k">if</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;projection&quot;</span><span class="p">][</span>
                        <span class="n">tt</span><span class="o">.</span><span class="n">projection</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="n">round_projections</span><span class="p">:</span>
                    <span class="n">tt</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;projection&quot;</span><span class="p">][</span>
                        <span class="n">tt</span><span class="o">.</span><span class="n">projection</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="n">round_projections</span><span class="p">:</span>
                    <span class="n">xmn</span><span class="p">,</span> <span class="n">xmx</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">minmax</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">x1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">x2</span><span class="p">)</span>
                    <span class="n">ymn</span><span class="p">,</span> <span class="n">ymx</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">minmax</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">y1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">y2</span><span class="p">)</span>
                    <span class="n">xwiden</span> <span class="o">=</span> <span class="o">.</span><span class="mi">02</span>
                    <span class="n">ywiden</span> <span class="o">=</span> <span class="o">.</span><span class="mi">02</span>
                    <span class="n">xmn</span> <span class="o">-=</span> <span class="n">xwiden</span>
                    <span class="n">xmx</span> <span class="o">+=</span> <span class="n">xwiden</span>
                    <span class="n">ymn</span> <span class="o">-=</span> <span class="n">ywiden</span>
                    <span class="n">ymx</span> <span class="o">+=</span> <span class="n">ywiden</span>
                    <span class="n">vp</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="nb">max</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="n">xmn</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">xmx</span><span class="p">,</span> <span class="mf">1.</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ymn</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymx</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)]</span>
                    <span class="n">tt</span><span class="o">.</span><span class="n">viewport</span> <span class="o">=</span> <span class="n">vp</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">tt</span><span class="o">.</span><span class="n">viewport</span> <span class="o">=</span> <span class="n">vp</span>
                    <span class="c1"># TODO: Transform axes names through geographic projections</span>
                    <span class="c1"># In that case the if goes and only the statement stays</span>
                    <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;ratio_autot_viewport&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kargs</span><span class="p">):</span>
                        <span class="n">tt</span><span class="o">.</span><span class="n">viewport</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">objlabl</span><span class="o">.</span><span class="n">y</span>

        <span class="c1"># initialize the list of values</span>
        <span class="n">tstring</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">xs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ys</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">tys</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">txs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">loc2</span> <span class="o">=</span> <span class="n">loc</span>
        <span class="n">loc</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">gm</span><span class="p">,</span> <span class="n">axis</span> <span class="o">+</span> <span class="s1">&#39;ticlabels&#39;</span> <span class="o">+</span> <span class="n">number</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">loc</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span> <span class="ow">or</span> <span class="n">loc</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="n">loc2</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="p">{})</span>
        <span class="c1"># set the x/y/text values</span>
        <span class="n">xmn</span><span class="p">,</span> <span class="n">xmx</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">minmax</span><span class="p">(</span><span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">wc</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">ymn</span><span class="p">,</span> <span class="n">ymx</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">minmax</span><span class="p">(</span><span class="n">wc</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">wc</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">loc</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">xmn</span> <span class="o">&lt;=</span> <span class="n">l</span> <span class="o">&lt;=</span> <span class="n">xmx</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;projection&quot;</span><span class="p">][</span>
                            <span class="n">gm</span><span class="o">.</span><span class="n">projection</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;linear&quot;</span><span class="p">:</span>
                        <span class="n">xs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="p">[(</span><span class="n">l</span> <span class="o">-</span> <span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">dx</span> <span class="o">+</span>
                                <span class="n">vp</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="n">l</span> <span class="o">-</span> <span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">dx</span> <span class="o">+</span>
                                <span class="n">vp</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                        <span class="n">ys</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">obj</span><span class="o">.</span><span class="n">y1</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">y2</span><span class="p">])</span>
                        <span class="n">txs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">l</span> <span class="o">-</span> <span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">dx</span> <span class="o">+</span> <span class="n">vp</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">tys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">objlabl</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;projection&quot;</span><span class="p">][</span><span class="n">gm</span><span class="o">.</span><span class="n">projection</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="n">elliptical_projections</span><span class="p">:</span>
                        <span class="k">pass</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">xs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">l</span><span class="p">,</span> <span class="n">l</span><span class="p">])</span>
                        <span class="n">end</span> <span class="o">=</span> <span class="n">wc</span><span class="p">[</span>
                            <span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">wc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">wc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">*</span>\
                            <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">y2</span> <span class="o">-</span> <span class="n">obj</span><span class="o">.</span><span class="n">y1</span><span class="p">)</span> <span class="o">/</span>\
                            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">y1</span><span class="p">)</span>
                        <span class="n">ys</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">wc</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">end</span><span class="p">])</span>
                        <span class="n">txs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
                        <span class="n">tys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wc</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
                    <span class="n">tstring</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loc</span><span class="p">[</span><span class="n">l</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">ymn</span> <span class="o">&lt;=</span> <span class="n">l</span> <span class="o">&lt;=</span> <span class="n">ymx</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;projection&quot;</span><span class="p">][</span>
                            <span class="n">gm</span><span class="o">.</span><span class="n">projection</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;linear&quot;</span><span class="p">:</span>
                        <span class="n">ys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="p">[(</span><span class="n">l</span> <span class="o">-</span> <span class="n">wc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">dy</span> <span class="o">+</span>
                                <span class="n">vp</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="p">(</span><span class="n">l</span> <span class="o">-</span> <span class="n">wc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">dy</span> <span class="o">+</span> <span class="n">vp</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
                        <span class="n">xs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">obj</span><span class="o">.</span><span class="n">x1</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">x2</span><span class="p">])</span>
                        <span class="n">tys</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">l</span> <span class="o">-</span> <span class="n">wc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">dy</span> <span class="o">+</span> <span class="n">vp</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                        <span class="n">txs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">objlabl</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">ys</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">l</span><span class="p">,</span> <span class="n">l</span><span class="p">])</span>
                        <span class="n">end</span> <span class="o">=</span> <span class="n">wc</span><span class="p">[</span>
                            <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">wc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span>\
                            <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_x2</span> <span class="o">-</span> <span class="n">obj</span><span class="o">.</span><span class="n">_x1</span><span class="p">)</span> <span class="o">/</span>\
                            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">_x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">x1</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;projection&quot;</span><span class="p">][</span>
                            <span class="n">gm</span><span class="o">.</span><span class="n">projection</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s2">&quot;linear&quot;</span> <span class="ow">and</span>\
                                <span class="n">end</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">180.</span><span class="p">:</span>
                            <span class="n">end</span> <span class="o">=</span> <span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">xs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">end</span><span class="p">])</span>
                        <span class="n">tys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
                        <span class="n">txs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="n">tstring</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loc</span><span class="p">[</span><span class="n">l</span><span class="p">])</span>
        <span class="c1"># now does the mini ticks</span>
        <span class="n">mintics</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">gm</span><span class="p">,</span> <span class="n">axis</span> <span class="o">+</span> <span class="s1">&#39;mtics&#39;</span> <span class="o">+</span> <span class="n">number</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mintics</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mintics</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">mintics</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">][</span><span class="n">mintics</span><span class="p">]</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span> <span class="o">+</span> <span class="s1">&#39;mintic&#39;</span> <span class="o">+</span> <span class="n">number</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">priority</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">ynum</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">,</span> <span class="s2">&quot;_y</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">number</span><span class="p">)</span>
                <span class="n">xnum</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">,</span> <span class="s2">&quot;_x</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">number</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">mintics</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">xmn</span> <span class="o">&lt;=</span> <span class="n">l</span> <span class="o">&lt;=</span> <span class="n">xmx</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;projection&quot;</span><span class="p">][</span>
                                    <span class="n">gm</span><span class="o">.</span><span class="n">projection</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;linear&quot;</span><span class="p">:</span>
                                <span class="n">xs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                    <span class="p">[(</span><span class="n">l</span> <span class="o">-</span> <span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">dx</span> <span class="o">+</span>
                                        <span class="n">vp</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="n">l</span> <span class="o">-</span> <span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">dx</span> <span class="o">+</span> <span class="n">vp</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                                <span class="n">ys</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">obj</span><span class="o">.</span><span class="n">y1</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">y2</span><span class="p">])</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">xs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">l</span><span class="p">,</span> <span class="n">l</span><span class="p">])</span>
                                <span class="n">ys</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">wc</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                                           <span class="n">wc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">wc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">wc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">*</span>
                                           <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_y</span> <span class="o">-</span> <span class="n">ynum</span><span class="p">)</span> <span class="o">/</span>
                                           <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">_y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">_y1</span><span class="p">)])</span>
                    <span class="k">elif</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">ymn</span> <span class="o">&lt;=</span> <span class="n">l</span> <span class="o">&lt;=</span> <span class="n">ymx</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;projection&quot;</span><span class="p">][</span>
                                    <span class="n">gm</span><span class="o">.</span><span class="n">projection</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;linear&quot;</span><span class="p">:</span>
                                <span class="n">ys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                    <span class="p">[(</span><span class="n">l</span> <span class="o">-</span> <span class="n">wc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">dy</span> <span class="o">+</span>
                                        <span class="n">vp</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="p">(</span><span class="n">l</span> <span class="o">-</span> <span class="n">wc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">dy</span> <span class="o">+</span> <span class="n">vp</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
                                <span class="n">xs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">obj</span><span class="o">.</span><span class="n">x1</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">x2</span><span class="p">])</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">ys</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">l</span><span class="p">,</span> <span class="n">l</span><span class="p">])</span>
                                <span class="n">xs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                           <span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span>
                                           <span class="p">(</span><span class="n">wc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_x</span> <span class="o">-</span> <span class="n">xnum</span><span class="p">)</span> <span class="o">/</span>
                                           <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">_x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">_x1</span><span class="p">)])</span>

        <span class="k">if</span> <span class="n">txs</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="n">tt</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="n">tstring</span>
            <span class="n">tt</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">txs</span>
            <span class="n">tt</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">tys</span>
            <span class="n">displays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">tt</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">bg</span><span class="p">,</span> <span class="n">ratio</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">xs</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="n">ticks</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">xs</span>
            <span class="n">ticks</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">ys</span>
            <span class="n">displays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">ticks</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">bg</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">))</span>
        <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;line&quot;</span><span class="p">][</span><span class="n">ticks</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
        <span class="n">sp</span> <span class="o">=</span> <span class="n">tt</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:::&quot;</span><span class="p">)</span>
        <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;texttable&quot;</span><span class="p">][</span><span class="n">sp</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
        <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;textorientation&quot;</span><span class="p">][</span><span class="n">sp</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
        <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;textcombined&quot;</span><span class="p">][</span><span class="n">tt</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">displays</span></div>

<div class="viewcode-block" id="P.blank"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.P.blank">[docs]</a>    <span class="k">def</span> <span class="nf">blank</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function turns off elements of a template object.</span>


<span class="sd">    :param attribute: String or list, indicating the elements of a template which should be turned off.</span>
<span class="sd">                      If attribute is left blank, or is None, all elements of the template will be turned off.</span>
<span class="sd">    :type attribute: None, str, list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">attribute</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attribute</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__slots__</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">attribute</span> <span class="o">=</span> <span class="p">[</span><span class="n">attribute</span><span class="p">,</span> <span class="p">]</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;template.blank function argument &quot;</span>
                            <span class="s2">&quot;must be None, string or list&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">attribute</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">elt</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">elt</span><span class="p">,</span> <span class="s2">&quot;priority&quot;</span><span class="p">):</span>
                    <span class="n">elt</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span></div>

<div class="viewcode-block" id="P.reset"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.P.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sub_name</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">ov1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ov2</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function resets all the attributes having a</span>
<span class="sd">        sub-attribute with the specified name.</span>

<span class="sd">        .. note::</span>
<span class="sd">            Respect how far from original position you are</span>
<span class="sd">            i.e. you move to x1,x2 from old_x1, old_x2</span>
<span class="sd">            if your current x1 value is not == to old_x1_value,</span>
<span class="sd">            then respect how far from it you  were</span>

<span class="sd">        Example:</span>

<span class="sd">            Create template &#39;example1&#39; which inherits from &#39;default&#39; template</span>
<span class="sd">            t = vcs.createtemplate(&#39;example1&#39;, &#39;default&#39;)</span>
<span class="sd">            Set x1 value to 0.15 and x2 value to 0.5</span>
<span class="sd">            t.reset(&#39;x&#39;,0.15,0.5,t.data.x1,t.data.x2)</span>

<span class="sd">        :param sub_name: String indicating the name of the sub-attribute to be reset.</span>
<span class="sd">                         For example, sub-name=&#39;x&#39; would cause the x1 ans x2 attributes to be set.</span>
<span class="sd">        :type sub_name: str</span>

<span class="sd">        :param v1: Float value to used to set the sub_name1 attribute.</span>
<span class="sd">        :type v1: float</span>

<span class="sd">        :param v2: Float value used to set the sub_name2 attribute.</span>
<span class="sd">        :type v2: float</span>

<span class="sd">        :param ov1: Float value of the old sub-name1 attribute value. Used to compute an offset ratio.</span>
<span class="sd">        :type ov1: float</span>

<span class="sd">        :param ov2: Float value of the old sub-name1 attribute value. Used to compute an offset ratio.</span>
<span class="sd">        :type ov2: float</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">Attr</span> <span class="o">=</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">Attr</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;_&quot;</span><span class="p">:</span>
                <span class="n">attr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="c1"># computes the ratio</span>
        <span class="k">if</span> <span class="n">ov1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">odv</span> <span class="o">=</span> <span class="n">ov2</span> <span class="o">-</span> <span class="n">ov1</span>
            <span class="n">ratio</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span> <span class="o">-</span> <span class="n">v1</span><span class="p">)</span> <span class="o">/</span> <span class="n">odv</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ratio</span> <span class="o">=</span> <span class="mf">1.</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">attr</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">subattr</span> <span class="o">=</span> <span class="nb">vars</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">subattr</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">__slots__</span>
                    <span class="n">delta</span> <span class="o">=</span> <span class="mf">0.</span>
                    <span class="k">if</span> <span class="n">sub_name</span> <span class="o">+</span> <span class="s1">&#39;1&#39;</span> <span class="ow">in</span> <span class="n">subattr</span><span class="p">:</span>
                        <span class="n">ov</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">sub_name</span> <span class="o">+</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">ov1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">delta</span> <span class="o">=</span> <span class="p">(</span><span class="n">ov</span> <span class="o">-</span> <span class="n">ov1</span><span class="p">)</span> <span class="o">*</span> <span class="n">ratio</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">sub_name</span> <span class="o">+</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">v1</span> <span class="o">+</span> <span class="n">delta</span><span class="p">)))</span>
                    <span class="n">delta</span> <span class="o">=</span> <span class="mf">0.</span>
                    <span class="k">if</span> <span class="n">sub_name</span> <span class="o">+</span> <span class="s1">&#39;2&#39;</span> <span class="ow">in</span> <span class="n">subattr</span><span class="p">:</span>
                        <span class="n">ov</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">sub_name</span> <span class="o">+</span> <span class="s1">&#39;2&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">ov2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">delta</span> <span class="o">=</span> <span class="p">(</span><span class="n">ov</span> <span class="o">-</span> <span class="n">ov2</span><span class="p">)</span> <span class="o">*</span> <span class="n">ratio</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">sub_name</span> <span class="o">+</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">v2</span> <span class="o">+</span> <span class="n">delta</span><span class="p">)))</span>
                    <span class="n">delta</span> <span class="o">=</span> <span class="mf">0.</span>
                    <span class="k">if</span> <span class="n">sub_name</span> <span class="ow">in</span> <span class="n">subattr</span><span class="p">:</span>
                        <span class="n">ov</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">sub_name</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">ov1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">delta</span> <span class="o">=</span> <span class="p">(</span><span class="n">ov</span> <span class="o">-</span> <span class="n">ov1</span><span class="p">)</span> <span class="o">*</span> <span class="n">ratio</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">sub_name</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">v1</span> <span class="o">+</span> <span class="n">delta</span><span class="p">)))</span>
                        <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;2&#39;</span><span class="p">:</span>
                            <span class="n">ov</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">sub_name</span> <span class="o">+</span> <span class="s1">&#39;2&#39;</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">ov2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">delta</span> <span class="o">=</span> <span class="p">(</span><span class="n">ov</span> <span class="o">-</span> <span class="n">ov2</span><span class="p">)</span> <span class="o">*</span> <span class="n">ratio</span>
                            <span class="nb">setattr</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">sub_name</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">v2</span> <span class="o">+</span> <span class="n">delta</span><span class="p">)))</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span></div>

<div class="viewcode-block" id="P.move"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.P.move">[docs]</a>    <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Move a template by p% along the axis &#39;x&#39; or &#39;y&#39;.</span>
<span class="sd">        Positive values of p mean movement toward right/top</span>
<span class="sd">        Negative values of p mean movement toward left/bottom</span>
<span class="sd">        The reference point is t.data.x1/y1</span>

<span class="sd">        :Example:</span>

<span class="sd">            .. doctest:: template_move</span>

<span class="sd">                &gt;&gt;&gt; t = vcs.createtemplate(&#39;example1&#39;, &#39;default&#39;) # Create template &#39;example1&#39;, inherits from &#39;default&#39;</span>
<span class="sd">                &gt;&gt;&gt; t.move(0.2,&#39;x&#39;) # Move everything right by 20%</span>
<span class="sd">                &gt;&gt;&gt; t.move(0.2,&#39;y&#39;) # Move everything up by 20%</span>

<span class="sd">        :param p: Float indicating the percentage by which the template should move. i.e. 0.2 = 20%.</span>
<span class="sd">        :type p: float</span>

<span class="sd">        :param axis: One of [&#39;x&#39;, &#39;y&#39;]. The axis along which the template will move.</span>
<span class="sd">        :type axis: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="s1">&#39;Error you can move the template only the x or y axis&#39;</span>
        <span class="c1"># p/=100.</span>
        <span class="n">ov1</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span> <span class="o">+</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
        <span class="n">ov2</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span> <span class="o">+</span> <span class="s1">&#39;2&#39;</span><span class="p">)</span>
        <span class="n">v1</span> <span class="o">=</span> <span class="n">ov1</span> <span class="o">+</span> <span class="n">p</span>
        <span class="n">v2</span> <span class="o">=</span> <span class="n">ov2</span> <span class="o">+</span> <span class="n">p</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">ov1</span><span class="p">,</span> <span class="n">ov2</span><span class="p">)</span></div>

<div class="viewcode-block" id="P.moveto"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.P.moveto">[docs]</a>    <span class="k">def</span> <span class="nf">moveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Move a template to point (x,y), adjusting all attributes so data.x1 = x, and data.y1 = y.</span>

<span class="sd">        :Example:</span>

<span class="sd">            .. doctest:: template_moveto</span>

<span class="sd">                &gt;&gt;&gt; t = vcs.createtemplate(&#39;example1&#39;, &#39;default&#39;) # Create template &#39;example1&#39;, inherits from &#39;default&#39;</span>
<span class="sd">                &gt;&gt;&gt; t.moveto(0.2, 0.2) # Move everything so that data.x1= 0.2 and data.y1= 0.2</span>

<span class="sd">        :param x: Float representing the new coordinate of the template&#39;s data.x1 attribute.</span>
<span class="sd">        :type x: float</span>

<span class="sd">        :param y: Float representing the new coordinate of the template&#39;s data.y1 attribute.</span>
<span class="sd">        :type y: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># p/=100.</span>
        <span class="n">ov1</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;x1&#39;</span><span class="p">)</span>
        <span class="n">ov2</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;x2&#39;</span><span class="p">)</span>
        <span class="n">v1</span> <span class="o">=</span> <span class="n">x</span>
        <span class="n">v2</span> <span class="o">=</span> <span class="p">(</span><span class="n">ov2</span> <span class="o">-</span> <span class="n">ov1</span><span class="p">)</span> <span class="o">+</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">ov1</span><span class="p">,</span> <span class="n">ov2</span><span class="p">)</span>
        <span class="n">ov1</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;y1&#39;</span><span class="p">)</span>
        <span class="n">ov2</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;y2&#39;</span><span class="p">)</span>
        <span class="n">v1</span> <span class="o">=</span> <span class="n">y</span>
        <span class="n">v2</span> <span class="o">=</span> <span class="p">(</span><span class="n">ov2</span> <span class="o">-</span> <span class="n">ov1</span><span class="p">)</span> <span class="o">+</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">ov1</span><span class="p">,</span> <span class="n">ov2</span><span class="p">)</span></div>

<div class="viewcode-block" id="P.scale"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.P.scale">[docs]</a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;xy&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Scale a template along the axis &#39;x&#39; or &#39;y&#39; by scale</span>
<span class="sd">        Positive values of scale mean increase</span>
<span class="sd">        Negative values of scale mean decrease</span>
<span class="sd">        The reference point is t.data.x1/y1</span>

<span class="sd">        :Example:</span>

<span class="sd">            .. doctest:: template_scale</span>


<span class="sd">                &gt;&gt;&gt; t = vcs.createtemplate(&#39;example1&#39;, &#39;default&#39;) # Create template &#39;example1&#39;, inherits from &#39;default&#39;</span>
<span class="sd">                &gt;&gt;&gt; t.scale(0.5) # Halves the template size</span>
<span class="sd">                &gt;&gt;&gt; t.scale(1.2) # Upsize everything to 20% more than the original size</span>
<span class="sd">                &gt;&gt;&gt; t.scale(2,&#39;x&#39;) # Double the x axis</span>

<span class="sd">        :param scale: Float representing the factor by which to scale the template.</span>
<span class="sd">        :type scale: float</span>

<span class="sd">        :param axis: One of [&#39;x&#39;, &#39;y&#39;, &#39;xy&#39;]. Represents the axis/axes along which the template should be scaled.</span>
<span class="sd">        :type axis: str</span>

<span class="sd">        :param font: Integer flag indicating what should be done with the template&#39;s fonts. One of [-1, 0, 1].</span>
<span class="sd">                    0: means do not scale the fonts. 1: means scale the fonts.</span>
<span class="sd">                    -1: means do not scale the fonts unless axis=&#39;xy&#39;</span>
<span class="sd">        :type font: int</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;xy&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="s1">&#39;Error you can move the template only the x or y axis&#39;</span>
        <span class="c1"># p/=100.</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;xy&#39;</span><span class="p">:</span>
            <span class="n">axis</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axis</span> <span class="o">=</span> <span class="p">[</span><span class="n">axis</span><span class="p">,</span> <span class="p">]</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axis</span><span class="p">:</span>
            <span class="n">ov1</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">ax</span> <span class="o">+</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
            <span class="n">ov2</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">ax</span> <span class="o">+</span> <span class="s1">&#39;2&#39;</span><span class="p">)</span>
            <span class="n">v1</span> <span class="o">=</span> <span class="n">ov1</span>
            <span class="n">v2</span> <span class="o">=</span> <span class="p">(</span><span class="n">ov2</span> <span class="o">-</span> <span class="n">ov1</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale</span> <span class="o">+</span> <span class="n">v1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">ov1</span><span class="p">,</span> <span class="n">ov2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">font</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="p">(</span><span class="n">font</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">axis</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scalefont</span><span class="p">(</span><span class="n">scale</span><span class="p">)</span></div>

<div class="viewcode-block" id="P.scalefont"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.P.scalefont">[docs]</a>    <span class="k">def</span> <span class="nf">scalefont</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Scales the template font by scale.</span>

<span class="sd">        Example:</span>

<span class="sd">            Create template &#39;example1&#39; which inherits from &#39;default&#39; template</span>
<span class="sd">            t = vcs.createtemplate(&#39;example1&#39;, &#39;default&#39;)</span>
<span class="sd">            reduces the fonts size by 2</span>
<span class="sd">            t.scalefont(0.5)</span>

<span class="sd">        :param scale: Float representing the factor by which to scale the template&#39;s font size.</span>
<span class="sd">        :type scale: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__slots__</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">attr</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
                <span class="n">to</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="s1">&#39;textorientation&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scaledFont</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>  <span class="c1"># first time let&#39;s copy it</span>
                    <span class="n">to</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">createtextorientation</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">to</span><span class="p">)</span>
                <span class="n">to</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">to</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="n">scale</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="s1">&#39;textorientation&#39;</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span></div>

<div class="viewcode-block" id="P.drawLinesAndMarkersLegend"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.P.drawLinesAndMarkersLegend">[docs]</a>    <span class="k">def</span> <span class="nf">drawLinesAndMarkersLegend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span>
                                  <span class="n">linecolors</span><span class="p">,</span> <span class="n">linetypes</span><span class="p">,</span> <span class="n">linewidths</span><span class="p">,</span>
                                  <span class="n">markercolors</span><span class="p">,</span> <span class="n">markertypes</span><span class="p">,</span> <span class="n">markersizes</span><span class="p">,</span>
                                  <span class="n">strings</span><span class="p">,</span> <span class="n">scratched</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">render</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws a legend with line/marker/text inside a template legend box</span>
<span class="sd">        Auto adjust text size to make it fit inside the box</span>
<span class="sd">        Auto arrange the elements to fill the box nicely</span>

<span class="sd">        :Example:</span>

<span class="sd">            .. doctest:: template_drawLinesAndMarkersLegend</span>

<span class="sd">                &gt;&gt;&gt; import vcs</span>
<span class="sd">                &gt;&gt;&gt; x = vcs.init()</span>
<span class="sd">                &gt;&gt;&gt; t = vcs.createtemplate()</span>
<span class="sd">                &gt;&gt;&gt; t.drawLinesAndMarkersLegend(x,</span>
<span class="sd">                ...     [&quot;red&quot;,&quot;blue&quot;,&quot;green&quot;], [&quot;solid&quot;,&quot;dash&quot;,&quot;dot&quot;],[1,4,8],</span>
<span class="sd">                ...     [&quot;blue&quot;,&quot;green&quot;,&quot;red&quot;], [&quot;cross&quot;,&quot;square&quot;,&quot;dot&quot;],[3,4,5],</span>
<span class="sd">                ...     [&quot;sample A&quot;,&quot;type B&quot;,&quot;thing C&quot;],True)</span>
<span class="sd">                &gt;&gt;&gt; x.png(&quot;sample&quot;)</span>

<span class="sd">        :param canvas: a VCS canvas object onto which to draw the legend</span>
<span class="sd">        :type canvas: vcs.Canvas.Canvas</span>

<span class="sd">        :param linecolors: list containing the colors of each line to draw</span>
<span class="sd">        :type linecolors: list of either colorInt, (r,g,b,opacity), or string color names</span>

<span class="sd">        :param linetypes: list containing the type of each line to draw</span>
<span class="sd">        :type linetypes: list on int of line stype strings</span>

<span class="sd">        :param linewidths: list containing each line width</span>
<span class="sd">        :type linewidths: list of float</span>

<span class="sd">        :param markercolors: list of the markers colors to draw</span>
<span class="sd">        :type markercolors: list of either colorInt, (r,g,b,opacity), or string color names</span>

<span class="sd">        :param markertypes: list of the marker types to draw</span>
<span class="sd">        :type markertypes: list of int or  string of marker names</span>

<span class="sd">        :param markersizes: list of the size of each marker to draw</span>
<span class="sd">        :type markersizes: list of float</span>

<span class="sd">        :param strings: list of the string to draw next to each line/marker</span>
<span class="sd">        :type strings: list of string</span>

<span class="sd">        :param scratched: None (off) or list. list contains False where no scratch is needed</span>
<span class="sd">                      For scratched provide True or line type to use for scratch</span>
<span class="sd">                      color will match that of text</span>
<span class="sd">        :type scratched: None or list of bool</span>

<span class="sd">        :param bg: do we draw in background or foreground</span>
<span class="sd">        :type bg: bool</span>

<span class="sd">        :param render: do we render or not (so it less flashy)</span>
<span class="sd">        :type render: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">vcs</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">drawLinesAndMarkersLegend</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span>
                                                   <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="p">,</span>
                                                   <span class="n">linecolors</span><span class="p">,</span> <span class="n">linetypes</span><span class="p">,</span> <span class="n">linewidths</span><span class="p">,</span>
                                                   <span class="n">markercolors</span><span class="p">,</span> <span class="n">markertypes</span><span class="p">,</span> <span class="n">markersizes</span><span class="p">,</span>
                                                   <span class="n">strings</span><span class="p">,</span> <span class="n">scratched</span><span class="p">,</span> <span class="n">bg</span><span class="p">,</span> <span class="n">render</span><span class="p">)</span></div>

<div class="viewcode-block" id="P.drawAttributes"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.P.drawAttributes">[docs]</a>    <span class="k">def</span> <span class="nf">drawAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">slab</span><span class="p">,</span> <span class="n">gm</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draws attribtes of slab onto a canvas</span>

<span class="sd">        :param x: vcs canvas onto which attributes will be drawn</span>
<span class="sd">        :type x: vcs.Canvas.Canvas</span>

<span class="sd">        :param slab: slab to get attributes from</span>
<span class="sd">        :type slab: cdms2.tvariable.TransientVariable, numpy.ndarray</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">displays</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># figures out the min and max and set them as atributes...</span>
        <span class="n">smn</span><span class="p">,</span> <span class="n">smx</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">minmax</span><span class="p">(</span><span class="n">slab</span><span class="p">)</span>

        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="s1">&#39;function&#39;</span><span class="p">,</span> <span class="s1">&#39;logicalmask&#39;</span><span class="p">,</span> <span class="s1">&#39;transformation&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">,</span> <span class="s1">&#39;crdate&#39;</span><span class="p">,</span> <span class="s1">&#39;crtime&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;comment1&#39;</span><span class="p">,</span> <span class="s1">&#39;comment2&#39;</span><span class="p">,</span> <span class="s1">&#39;comment3&#39;</span><span class="p">,</span> <span class="s1">&#39;comment4&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;zname&#39;</span><span class="p">,</span> <span class="s1">&#39;tname&#39;</span><span class="p">,</span> <span class="s1">&#39;zunits&#39;</span><span class="p">,</span> <span class="s1">&#39;tunits&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;xvalue&#39;</span><span class="p">,</span> <span class="s1">&#39;yvalue&#39;</span><span class="p">,</span> <span class="s1">&#39;zvalue&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;tvalue&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">,</span> <span class="s1">&#39;xname&#39;</span><span class="p">,</span> <span class="s1">&#39;yname&#39;</span><span class="p">,</span> <span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gm</span><span class="p">,</span> <span class="n">vcs</span><span class="o">.</span><span class="n">taylor</span><span class="o">.</span><span class="n">Gtd</span><span class="p">):</span>
            <span class="n">attributes</span> <span class="o">=</span> <span class="n">attributes</span><span class="p">[:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>

        <span class="c1"># loop through various section of the template object</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">slab</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;id&#39;</span><span class="p">:</span>
                    <span class="n">sub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataname</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">sub</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
                <span class="n">tt</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">createtext</span><span class="p">(</span>
                    <span class="kc">None</span><span class="p">,</span>
                    <span class="n">sub</span><span class="o">.</span><span class="n">texttable</span><span class="p">,</span>
                    <span class="kc">None</span><span class="p">,</span>
                    <span class="n">sub</span><span class="o">.</span><span class="n">textorientation</span><span class="p">)</span>

                <span class="c1"># Now for the min/max/mean add the name in front</span>
                <span class="n">kargs</span><span class="p">[</span><span class="s2">&quot;donotstoredisplay&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                    <span class="n">tt</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;Min </span><span class="si">%g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">smn</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span>
                    <span class="n">tt</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;Max </span><span class="si">%g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">smx</span>
                <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;mean&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismethod</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">slab</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">)):</span>
                        <span class="n">meanstring</span> <span class="o">=</span> <span class="s1">&#39;Mean &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">slab</span><span class="p">,</span> <span class="n">s</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">meanstring</span> <span class="o">=</span> <span class="s1">&#39;Mean </span><span class="si">%.4g</span><span class="s1">&#39;</span> <span class="o">%</span> \
                                <span class="nb">float</span><span class="p">(</span><span class="n">cdutil</span><span class="o">.</span><span class="n">averager</span><span class="p">(</span><span class="n">slab</span><span class="p">,</span>
                                                      <span class="n">axis</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span>
                                                                     <span class="n">S</span> <span class="k">for</span> <span class="n">S</span> <span class="ow">in</span> <span class="n">slab</span><span class="o">.</span><span class="n">getAxisIds</span><span class="p">()])))</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">meanstring</span> <span class="o">=</span> <span class="s1">&#39;Mean </span><span class="si">%.4g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">slab</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">meanstring</span> <span class="o">=</span> <span class="s1">&#39;Mean </span><span class="si">%.4g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">numpy</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">slab</span><span class="o">.</span><span class="n">filled</span><span class="p">())</span>
                    <span class="n">tt</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="n">meanstring</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">tt</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">slab</span><span class="p">,</span> <span class="n">s</span><span class="p">))</span>
                    <span class="n">kargs</span><span class="p">[</span><span class="s2">&quot;donotstoredisplay&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">tt</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">sub</span><span class="o">.</span><span class="n">x</span><span class="p">]</span>
                <span class="n">tt</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">sub</span><span class="o">.</span><span class="n">y</span><span class="p">]</span>
                <span class="n">tt</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="n">sub</span><span class="o">.</span><span class="n">priority</span>
                <span class="c1"># this is text such as variable name, min/max</span>
                <span class="c1"># that does not have to follow ratio=atot</span>
                <span class="n">dp</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">tt</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">bg</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">dp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">s</span> <span class="o">!=</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span>
                        <span class="n">dp</span><span class="o">.</span><span class="n">backend</span><span class="p">[</span><span class="s2">&quot;vtk_backend_template_attribute&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">dp</span><span class="o">.</span><span class="n">backend</span><span class="p">[</span>
                            <span class="s2">&quot;vtk_backend_template_attribute&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;dataname&quot;</span>
                    <span class="n">displays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
                <span class="n">sp</span> <span class="o">=</span> <span class="n">tt</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:::&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">kargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;donotstoredisplay&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
                    <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;texttable&quot;</span><span class="p">][</span><span class="n">sp</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                    <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;textorientation&quot;</span><span class="p">][</span><span class="n">sp</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                    <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;textcombined&quot;</span><span class="p">][</span><span class="n">tt</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">displays</span></div>

<div class="viewcode-block" id="P.plot"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.P.plot">[docs]</a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">slab</span><span class="p">,</span> <span class="n">gm</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="nb">max</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This plots the template stuff on the Canvas.</span>
<span class="sd">        It needs a slab and a graphic method.</span>

<span class="sd">        :returns: A list containing all the displays used</span>
<span class="sd">        :rtype: list</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">displays</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">kargs</span><span class="p">[</span><span class="s2">&quot;donotstoredisplay&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">kargs</span><span class="p">[</span><span class="s2">&quot;render&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># now remembers the viewport and worldcoordinates in order to reset</span>
        <span class="c1"># them later</span>
        <span class="n">vp</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">_viewport</span>
        <span class="n">wc</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">_worldcoordinate</span>
        <span class="c1"># m=x.mode</span>
        <span class="c1"># and resets everything to [0,1]</span>
        <span class="n">x</span><span class="o">.</span><span class="n">_viewport</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">x</span><span class="o">.</span><span class="n">_worldcoordinate</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="c1"># x.mode=0 # this should disable the replot but it doesn&#39;t work....</span>

        <span class="n">displays</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawAttributes</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">slab</span><span class="p">,</span> <span class="n">gm</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">bg</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span>

        <span class="n">kargs</span><span class="p">[</span><span class="s2">&quot;donotstoredisplay&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gm</span><span class="p">,</span> <span class="n">vcs</span><span class="o">.</span><span class="n">taylor</span><span class="o">.</span><span class="n">Gtd</span><span class="p">):</span>
            <span class="n">nms</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">slab</span><span class="o">.</span><span class="n">getAxisList</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
                <span class="k">if</span> <span class="n">nms</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">gm</span><span class="p">,</span> <span class="s2">&quot;projection&quot;</span><span class="p">)</span> <span class="ow">and</span> \
                        <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;projection&quot;</span><span class="p">][</span><span class="n">gm</span><span class="o">.</span><span class="n">projection</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> \
                        <span class="ow">in</span> <span class="n">round_projections</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="n">nm</span> <span class="o">=</span> <span class="n">nms</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;name&quot;</span>
                <span class="n">sub</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nm</span><span class="p">)</span>
                <span class="n">tt</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">createtext</span><span class="p">(</span>
                    <span class="kc">None</span><span class="p">,</span>
                    <span class="n">sub</span><span class="o">.</span><span class="n">texttable</span><span class="p">,</span>
                    <span class="kc">None</span><span class="p">,</span>
                    <span class="n">sub</span><span class="o">.</span><span class="n">textorientation</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">gm</span><span class="o">.</span><span class="n">g_name</span> <span class="o">==</span> <span class="s2">&quot;G1d&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">gm</span><span class="o">.</span><span class="n">flip</span> <span class="ow">or</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">slab</span><span class="p">,</span> <span class="s2">&quot;_yname&quot;</span><span class="p">):</span>
                        <span class="n">tt</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="p">[</span><span class="n">slab</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">tt</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">gm</span><span class="o">.</span><span class="n">g_name</span> <span class="o">==</span> <span class="s2">&quot;G1d&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">slab</span><span class="p">,</span> <span class="s2">&quot;_yname&quot;</span><span class="p">):</span>
                        <span class="n">tt</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="p">[</span><span class="n">slab</span><span class="o">.</span><span class="n">_yname</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">tt</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">tt</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
                <span class="n">tt</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">sub</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="p">]</span>
                <span class="n">tt</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">sub</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="p">]</span>
                <span class="n">tt</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="n">sub</span><span class="o">.</span><span class="n">_priority</span>
                <span class="c1"># This is the name of the axis. It should be transformed</span>
                <span class="c1"># through geographic projection but it is not at the moment</span>
                <span class="n">displays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">tt</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">bg</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">))</span>
                <span class="n">sp</span> <span class="o">=</span> <span class="n">tt</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:::&quot;</span><span class="p">)</span>
                <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;texttable&quot;</span><span class="p">][</span><span class="n">sp</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;textorientation&quot;</span><span class="p">][</span><span class="n">sp</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;textcombined&quot;</span><span class="p">][</span><span class="n">tt</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">X</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">X</span> <span class="o">=</span> <span class="n">slab</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">Y</span> <span class="o">=</span> <span class="n">slab</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">wc2</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">getworldcoordinates</span><span class="p">(</span><span class="n">gm</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">)</span>
        <span class="n">wc2</span> <span class="o">=</span> <span class="n">kargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;plotting_dataset_bounds&quot;</span><span class="p">,</span> <span class="n">wc2</span><span class="p">)</span>
        <span class="n">vp2</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y2</span><span class="p">]</span>
        <span class="n">vp2</span> <span class="o">=</span> <span class="n">kargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ratio_autot_viewport&quot;</span><span class="p">,</span> <span class="n">vp2</span><span class="p">)</span>

        <span class="c1"># Do the tickmarks/labels</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gm</span><span class="p">,</span> <span class="n">vcs</span><span class="o">.</span><span class="n">taylor</span><span class="o">.</span><span class="n">Gtd</span><span class="p">):</span>
            <span class="n">displays</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawTicks</span><span class="p">(</span><span class="n">slab</span><span class="p">,</span>
                                       <span class="n">gm</span><span class="p">,</span>
                                       <span class="n">x</span><span class="p">,</span>
                                       <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span>
                                       <span class="n">number</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span>
                                       <span class="n">vp</span><span class="o">=</span><span class="n">vp2</span><span class="p">,</span>
                                       <span class="n">wc</span><span class="o">=</span><span class="n">wc2</span><span class="p">,</span>
                                       <span class="n">bg</span><span class="o">=</span><span class="n">bg</span><span class="p">,</span>
                                       <span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">,</span>
                                       <span class="n">Y</span><span class="o">=</span><span class="n">Y</span><span class="p">,</span>
                                       <span class="o">**</span><span class="n">kargs</span><span class="p">)</span>
            <span class="n">displays</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawTicks</span><span class="p">(</span><span class="n">slab</span><span class="p">,</span>
                                       <span class="n">gm</span><span class="p">,</span>
                                       <span class="n">x</span><span class="p">,</span>
                                       <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span>
                                       <span class="n">number</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="p">,</span>
                                       <span class="n">vp</span><span class="o">=</span><span class="n">vp2</span><span class="p">,</span>
                                       <span class="n">wc</span><span class="o">=</span><span class="n">wc2</span><span class="p">,</span>
                                       <span class="n">bg</span><span class="o">=</span><span class="n">bg</span><span class="p">,</span>
                                       <span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">,</span>
                                       <span class="n">Y</span><span class="o">=</span><span class="n">Y</span><span class="p">,</span>
                                       <span class="o">**</span><span class="n">kargs</span><span class="p">)</span>
            <span class="n">displays</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawTicks</span><span class="p">(</span><span class="n">slab</span><span class="p">,</span>
                                       <span class="n">gm</span><span class="p">,</span>
                                       <span class="n">x</span><span class="p">,</span>
                                       <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span>
                                       <span class="n">number</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span>
                                       <span class="n">vp</span><span class="o">=</span><span class="n">vp2</span><span class="p">,</span>
                                       <span class="n">wc</span><span class="o">=</span><span class="n">wc2</span><span class="p">,</span>
                                       <span class="n">bg</span><span class="o">=</span><span class="n">bg</span><span class="p">,</span>
                                       <span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">,</span>
                                       <span class="n">Y</span><span class="o">=</span><span class="n">Y</span><span class="p">,</span>
                                       <span class="o">**</span><span class="n">kargs</span><span class="p">)</span>
            <span class="n">displays</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawTicks</span><span class="p">(</span><span class="n">slab</span><span class="p">,</span>
                                       <span class="n">gm</span><span class="p">,</span>
                                       <span class="n">x</span><span class="p">,</span>
                                       <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span>
                                       <span class="n">number</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="p">,</span>
                                       <span class="n">vp</span><span class="o">=</span><span class="n">vp2</span><span class="p">,</span>
                                       <span class="n">wc</span><span class="o">=</span><span class="n">wc2</span><span class="p">,</span>
                                       <span class="n">bg</span><span class="o">=</span><span class="n">bg</span><span class="p">,</span>
                                       <span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">,</span>
                                       <span class="n">Y</span><span class="o">=</span><span class="n">Y</span><span class="p">,</span>
                                       <span class="o">**</span><span class="n">kargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">X</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">X</span> <span class="o">=</span> <span class="n">slab</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">Y</span> <span class="o">=</span> <span class="n">slab</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">wc2</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">getworldcoordinates</span><span class="p">(</span><span class="n">gm</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">)</span>
        <span class="n">wc2</span> <span class="o">=</span> <span class="n">kargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;plotting_dataset_bounds&quot;</span><span class="p">,</span> <span class="n">wc2</span><span class="p">)</span>

        <span class="c1"># Do the boxes and lines</span>
        <span class="k">for</span> <span class="n">tp</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;box&quot;</span><span class="p">,</span> <span class="s2">&quot;line&quot;</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">]:</span>
                <span class="n">e</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tp</span> <span class="o">+</span> <span class="n">num</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">priority</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">l</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">createline</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">e</span><span class="o">.</span><span class="n">line</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">gm</span><span class="p">,</span> <span class="s2">&quot;projection&quot;</span><span class="p">):</span>
                        <span class="n">l</span><span class="o">.</span><span class="n">projection</span> <span class="o">=</span> <span class="n">gm</span><span class="o">.</span><span class="n">projection</span>
                    <span class="k">if</span> <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;projection&quot;</span><span class="p">][</span>
                            <span class="n">l</span><span class="o">.</span><span class="n">projection</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s2">&quot;linear&quot;</span><span class="p">:</span>
                        <span class="n">l</span><span class="o">.</span><span class="n">worldcoordinate</span> <span class="o">=</span> <span class="n">wc2</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
                        <span class="n">l</span><span class="o">.</span><span class="n">viewport</span> <span class="o">=</span> <span class="n">kargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ratio_autot_viewport&quot;</span><span class="p">,</span>
                                               <span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">_x1</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_x2</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_y1</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_y2</span><span class="p">])</span>
                        <span class="n">dx</span> <span class="o">=</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">_x2</span> <span class="o">-</span> <span class="n">e</span><span class="o">.</span><span class="n">_x1</span><span class="p">)</span> <span class="o">/</span> \
                            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">x1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">wc2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">wc2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">dy</span> <span class="o">=</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">_y2</span> <span class="o">-</span> <span class="n">e</span><span class="o">.</span><span class="n">_y1</span><span class="p">)</span> <span class="o">/</span> \
                            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">y1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">wc2</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">wc2</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                        <span class="k">if</span> <span class="n">tp</span> <span class="o">==</span> <span class="s2">&quot;line&quot;</span><span class="p">:</span>
                            <span class="n">l</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="p">[</span><span class="n">wc2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">wc2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">dx</span><span class="p">]</span>
                            <span class="n">l</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="p">[</span><span class="n">wc2</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">wc2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">dy</span><span class="p">]</span>
                        <span class="k">elif</span> <span class="n">tp</span> <span class="o">==</span> <span class="s2">&quot;box&quot;</span> <span class="ow">and</span> \
                                <span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;projection&quot;</span><span class="p">][</span><span class="n">l</span><span class="o">.</span><span class="n">projection</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span>\
                                <span class="n">round_projections</span><span class="p">:</span>
                            <span class="n">l</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="p">[[</span><span class="n">wc2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">wc2</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">wc2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">wc2</span><span class="p">[</span><span class="mi">1</span><span class="p">]]]</span>
                            <span class="n">l</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="p">[</span><span class="n">wc2</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">wc2</span><span class="p">[</span><span class="mi">3</span><span class="p">]],</span> <span class="p">[</span><span class="n">wc2</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">wc2</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">l</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="p">[</span>
                                <span class="n">wc2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                <span class="n">wc2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span>
                                <span class="n">wc2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span>
                                <span class="n">wc2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                <span class="n">wc2</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                            <span class="n">l</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="p">[</span><span class="n">wc2</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">wc2</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">wc2</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">wc2</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">wc2</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">l</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">_x1</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_x2</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_x2</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_x1</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_x1</span><span class="p">]</span>
                        <span class="n">l</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">_y1</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_y1</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_y2</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_y2</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">_y1</span><span class="p">]</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">_priority</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">_priority</span>
                    <span class="n">displays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">bg</span><span class="p">,</span> <span class="n">ratio</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">))</span>
                    <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;line&quot;</span><span class="p">][</span><span class="n">l</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>

        <span class="c1"># x.mode=m</span>
        <span class="c1"># I think i have to use dict here because it&#39;s a valid value</span>
        <span class="c1"># (obviously since i got it from the object itself and didn&#39;t touch it</span>
        <span class="c1"># but Dean doesn&#39;t allow to set it back to some of these values (None)!</span>
        <span class="n">x</span><span class="o">.</span><span class="n">_viewport</span> <span class="o">=</span> <span class="n">vp</span>
        <span class="n">x</span><span class="o">.</span><span class="n">_worldcoordinate</span> <span class="o">=</span> <span class="n">wc</span>
        <span class="k">return</span> <span class="n">displays</span></div>

<div class="viewcode-block" id="P.drawColorBar"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.P.drawColorBar">[docs]</a>    <span class="k">def</span> <span class="nf">drawColorBar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">levels</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ext_1</span><span class="o">=</span><span class="s1">&#39;n&#39;</span><span class="p">,</span>
                     <span class="n">ext_2</span><span class="o">=</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;solid&#39;</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                     <span class="n">opacity</span><span class="o">=</span><span class="p">[],</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function, draws the colorbar, it needs:</span>
<span class="sd">        colors : The colors to be plotted</span>
<span class="sd">        levels : The levels that each color represent</span>
<span class="sd">        legend : To overwrite, saying just draw box at</span>
<span class="sd">        certain values and display some specific text instead of the value</span>
<span class="sd">        ext_1 and ext_2: to draw the arrows</span>
<span class="sd">        x : the canvas where to plot it</span>
<span class="sd">        bg: background mode ?</span>
<span class="sd">        returns a list of displays used</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">kargs</span><span class="p">[</span><span class="s2">&quot;donotstoredisplay&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">displays</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#</span>
        <span class="c1"># Create legend</span>
        <span class="c1">#</span>

        <span class="c1"># Are levs contiguous?</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">levels</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">levs2</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">cont</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">levels</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">levels</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">levels</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">levs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">levels</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># Ok not contiguous</span>
                    <span class="n">cont</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="n">cont</span><span class="p">:</span>
                <span class="n">levs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">levels</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">levs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">levels</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">levels</span> <span class="o">=</span> <span class="n">levs2</span>

        <span class="c1"># Now sets the priority value</span>
        <span class="k">if</span> <span class="n">priority</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">priority</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">priority</span>
        <span class="c1"># Now resets the viewport and worldcoordinate</span>
        <span class="n">vp</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">viewport</span>  <span class="c1"># preserve for later restore</span>
        <span class="n">wc</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">worldcoordinate</span>  <span class="c1"># preserve for later restore</span>
        <span class="n">x</span><span class="o">.</span><span class="n">viewport</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]</span>
        <span class="n">x</span><span class="o">.</span><span class="n">worldcoordinate</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]</span>
        <span class="c1"># Ok first determine the orientation of the legend (bottom to top  or</span>
        <span class="c1"># left to right)</span>
        <span class="n">dX</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">x1</span><span class="p">)</span>
        <span class="n">dY</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">y1</span><span class="p">)</span>
        <span class="n">nbox</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">levels</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">l0</span> <span class="o">=</span> <span class="n">levels</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">l1</span> <span class="o">=</span> <span class="n">levels</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">l0</span> <span class="o">=</span> <span class="n">levels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">l1</span> <span class="o">=</span> <span class="n">levels</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">l0</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">1.e19</span><span class="p">:</span>
            <span class="n">ext_1</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span>
        <span class="k">if</span> <span class="n">l1</span> <span class="o">&gt;</span> <span class="mf">1.e19</span><span class="p">:</span>
            <span class="n">ext_2</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span>
        <span class="n">levels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">levels</span><span class="p">)</span>
        <span class="c1"># Now figure out the typical length of a box</span>
        <span class="k">if</span> <span class="n">dX</span> <span class="o">&gt;</span> <span class="n">dY</span><span class="p">:</span>
            <span class="n">isHorizontal</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">length</span> <span class="o">=</span> <span class="n">dX</span>
            <span class="n">boxLength</span> <span class="o">=</span> <span class="n">dX</span> <span class="o">/</span> <span class="n">nbox</span>
            <span class="n">thick</span> <span class="o">=</span> <span class="n">dY</span>
            <span class="n">startLength</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">x1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">x2</span><span class="p">)</span>
            <span class="n">startThick</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">y1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">y2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">isHorizontal</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">length</span> <span class="o">=</span> <span class="n">dY</span>
            <span class="n">boxLength</span> <span class="o">=</span> <span class="n">dY</span> <span class="o">/</span> <span class="n">nbox</span>
            <span class="n">thick</span> <span class="o">=</span> <span class="n">dX</span>
            <span class="n">startLength</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">y1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">y2</span><span class="p">)</span>
            <span class="n">startThick</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">x1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">x2</span><span class="p">)</span>
        <span class="c1"># initialize the fillarea coordinates</span>
        <span class="n">L</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># length</span>
        <span class="n">T</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># thickness</span>
        <span class="c1"># computes the fillarea coordinates</span>
        <span class="n">iext</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># To know if we changed the dims</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">ext_1</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span> <span class="ow">or</span> <span class="n">ext_2</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">):</span>  <span class="c1"># and boxLength &lt; self.legend.arrow * length:</span>
            <span class="n">iext</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># one mins changed ext_1</span>
            <span class="n">arrowLength</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">arrow</span> <span class="o">*</span> <span class="n">length</span>
            <span class="k">if</span> <span class="n">ext_1</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span> <span class="ow">and</span> <span class="n">ext_2</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
                <span class="n">boxLength</span> <span class="o">=</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="mf">2.</span> <span class="o">*</span> <span class="n">arrowLength</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">nbox</span> <span class="o">-</span> <span class="mf">2.</span><span class="p">)</span>
                <span class="n">iext</span> <span class="o">=</span> <span class="mi">3</span>  <span class="c1"># changed both side</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">boxLength</span> <span class="o">=</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="n">arrowLength</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">nbox</span> <span class="o">-</span> <span class="mf">1.</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ext_2</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
                    <span class="n">iext</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="c1"># Loops thru the boxes (i.e colors NOT actual boxes drawn)</span>
        <span class="n">adjust</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nbox</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">ext_1</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># Draws the little arrow at the begining</span>
                <span class="c1"># Make sure the triangle goes back to first point</span>
                <span class="c1"># Because used to close the extension</span>
                <span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">([</span>
                    <span class="n">startLength</span> <span class="o">+</span> <span class="n">arrowLength</span><span class="p">,</span>
                    <span class="n">startLength</span><span class="p">,</span>
                    <span class="n">startLength</span> <span class="o">+</span> <span class="n">arrowLength</span><span class="p">,</span>
                <span class="p">])</span>
                <span class="n">T</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">startThick</span><span class="p">,</span>
                        <span class="n">startThick</span> <span class="o">+</span> <span class="n">thick</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">,</span>
                        <span class="n">startThick</span> <span class="o">+</span> <span class="n">thick</span><span class="p">,</span>
                    <span class="p">])</span>
                <span class="c1"># Now readjust startLength if necessary</span>
                <span class="k">if</span> <span class="n">iext</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">iext</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">startLength</span> <span class="o">=</span> <span class="n">startLength</span> <span class="o">+</span> <span class="n">arrowLength</span>
                    <span class="n">adjust</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">elif</span> <span class="n">ext_2</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">==</span> <span class="n">nbox</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># Draws the little arrow at the end</span>
                <span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">([</span>
                    <span class="n">startLength</span> <span class="o">+</span> <span class="n">boxLength</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">adjust</span><span class="p">),</span>
                    <span class="n">startLength</span> <span class="o">+</span> <span class="n">boxLength</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">adjust</span><span class="p">)</span> <span class="o">+</span> <span class="n">arrowLength</span><span class="p">,</span>
                    <span class="n">startLength</span> <span class="o">+</span> <span class="n">boxLength</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">adjust</span><span class="p">),</span>
                <span class="p">])</span>
                <span class="n">T</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">startThick</span><span class="p">,</span>
                        <span class="n">startThick</span> <span class="o">+</span> <span class="n">thick</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">,</span>
                        <span class="n">startThick</span> <span class="o">+</span> <span class="n">thick</span><span class="p">,</span>
                    <span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Draws a normal box</span>
                <span class="c1"># print i,boxLength,thick,startLength,startThick</span>
                <span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">startLength</span> <span class="o">+</span> <span class="n">boxLength</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">adjust</span><span class="p">),</span>
                          <span class="n">startLength</span> <span class="o">+</span> <span class="n">boxLength</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">adjust</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
                          <span class="n">startLength</span> <span class="o">+</span> <span class="n">boxLength</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">adjust</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
                          <span class="n">startLength</span> <span class="o">+</span> <span class="n">boxLength</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">adjust</span><span class="p">)])</span>
                <span class="n">T</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">startThick</span><span class="p">,</span>
                          <span class="n">startThick</span><span class="p">,</span>
                          <span class="n">startThick</span> <span class="o">+</span> <span class="n">thick</span><span class="p">,</span>
                          <span class="n">startThick</span> <span class="o">+</span> <span class="n">thick</span><span class="p">])</span>

        <span class="n">fa</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">createfillarea</span><span class="p">()</span>
        <span class="n">fa</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">colors</span>
        <span class="n">fa</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="n">style</span>
        <span class="n">fa</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">index</span>
        <span class="n">fa</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">priority</span>
        <span class="c1"># Boxfill default comes in here with [] we need to fix this</span>
        <span class="k">if</span> <span class="n">opacity</span> <span class="o">==</span> <span class="p">[]:</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span>
        <span class="n">fa</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="n">opacity</span>
        <span class="n">fa</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="n">priority</span>
        <span class="k">if</span> <span class="n">cmap</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fa</span><span class="o">.</span><span class="n">colormap</span> <span class="o">=</span> <span class="n">cmap</span>
        <span class="c1"># assigning directly since we gen it we know it&#39;s good</span>
        <span class="k">if</span> <span class="n">isHorizontal</span><span class="p">:</span>
            <span class="n">fa</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">L</span>
            <span class="n">fa</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">T</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fa</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">T</span>
            <span class="n">fa</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">L</span>
        <span class="n">displays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fa</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">bg</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">))</span>
        <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;fillarea&quot;</span><span class="p">][</span><span class="n">fa</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
        <span class="c1"># Now draws the box around the legend</span>
        <span class="c1"># First of all make sure we draw the arrows</span>
        <span class="n">Tl</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Thickness labels location</span>
        <span class="n">Ll</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Length labels location</span>
        <span class="n">Tt</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Thickness ticks location</span>
        <span class="n">Lt</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Length ticks location</span>
        <span class="n">St</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># String location</span>
        <span class="n">levelsLength</span> <span class="o">=</span> <span class="n">length</span>  <span class="c1"># length of the levels area</span>
        <span class="k">if</span> <span class="n">ext_1</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
            <span class="n">Tl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">Ll</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">levels</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">iext</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">iext</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">levelsLength</span> <span class="o">=</span> <span class="n">levelsLength</span> <span class="o">-</span> <span class="n">arrowLength</span>
        <span class="k">if</span> <span class="n">ext_2</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
            <span class="n">Tl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">Ll</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">L</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">levels</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">iext</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">levelsLength</span> <span class="o">=</span> <span class="n">levelsLength</span> <span class="o">-</span> <span class="n">arrowLength</span>
        <span class="c1"># adds the coordinate for the box around the legend</span>
        <span class="n">Tl</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">startThick</span><span class="p">,</span>
                   <span class="n">startThick</span><span class="p">,</span>
                   <span class="n">startThick</span> <span class="o">+</span> <span class="n">thick</span><span class="p">,</span>
                   <span class="n">startThick</span> <span class="o">+</span> <span class="n">thick</span><span class="p">,</span>
                   <span class="n">startThick</span><span class="p">])</span>
        <span class="n">Ll</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">startLength</span><span class="p">,</span>
                   <span class="n">startLength</span> <span class="o">+</span> <span class="n">levelsLength</span><span class="p">,</span>
                   <span class="n">startLength</span> <span class="o">+</span> <span class="n">levelsLength</span><span class="p">,</span>
                   <span class="n">startLength</span><span class="p">,</span>
                   <span class="n">startLength</span><span class="p">])</span>
        <span class="c1"># Now make sure we have a legend</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">levels</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
            <span class="c1"># Ok these are non-contiguous levels, we will use legend only if</span>
            <span class="c1"># it&#39;s a perfect match</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">levels</span><span class="p">):</span>
                <span class="n">lt</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">lb</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">loc</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">boxLength</span> <span class="o">+</span> <span class="n">startLength</span>
                <span class="n">Ll</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">loc</span><span class="p">,</span> <span class="n">loc</span><span class="p">])</span>
                <span class="n">Tl</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">startThick</span><span class="p">,</span> <span class="n">startThick</span> <span class="o">+</span> <span class="n">thick</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">legend</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">lt</span> <span class="o">=</span> <span class="n">legend</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">lt</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                    <span class="n">lb</span> <span class="o">=</span> <span class="n">legend</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">lt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">loct</span> <span class="o">=</span> <span class="n">startLength</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="o">.</span><span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="n">boxLength</span>
                    <span class="n">St</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">lt</span><span class="p">))</span>
                    <span class="n">Lt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loct</span><span class="p">)</span>
                    <span class="n">Tt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">startThick</span> <span class="o">+</span> <span class="n">thick</span> <span class="o">*</span> <span class="mf">1.4</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">lb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">loct</span> <span class="o">=</span> <span class="n">startLength</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="o">.</span><span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="n">boxLength</span>
                    <span class="n">St</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">lb</span><span class="p">))</span>
                    <span class="n">Lt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loct</span><span class="p">)</span>
                    <span class="n">Tt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">startThick</span> <span class="o">-</span> <span class="n">thick</span> <span class="o">*</span> <span class="o">.</span><span class="mi">6</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">legend</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">legend</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">mklabels</span><span class="p">(</span><span class="n">levels</span><span class="p">)</span>
            <span class="c1"># We&#39;ll use the less precise float epsilon since this is just for labels</span>
            <span class="k">if</span> <span class="n">levels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">levels</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">comparison</span> <span class="o">=</span> <span class="n">epsilon_lte</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">comparison</span> <span class="o">=</span> <span class="n">epsilon_gte</span>

            <span class="k">def</span> <span class="nf">in_bounds</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">comparison</span><span class="p">(</span><span class="n">levels</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">)</span> <span class="ow">and</span> <span class="n">comparison</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">levels</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

            <span class="n">boxLength</span> <span class="o">=</span> <span class="n">levelsLength</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">levels</span><span class="p">)</span> <span class="o">-</span> <span class="mf">1.</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">il</span><span class="p">,</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">legend</span><span class="o">.</span><span class="n">keys</span><span class="p">())):</span>
                <span class="k">if</span> <span class="n">in_bounds</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">levels</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                        <span class="c1"># if legend key is (inclusive) between levels[i] and levels[i+1]</span>
                        <span class="k">if</span> <span class="n">comparison</span><span class="p">(</span><span class="n">levels</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">l</span><span class="p">)</span> <span class="ow">and</span> <span class="n">comparison</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">levels</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]):</span>
                            <span class="c1"># first let&#39;s figure out where to put the legend label</span>
                            <span class="n">location</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">boxLength</span>  <span class="c1"># position at beginning of level</span>
                            <span class="c1"># Adds the distance from beginning of level box</span>
                            <span class="n">location</span> <span class="o">+=</span> <span class="p">(</span><span class="n">l</span> <span class="o">-</span> <span class="n">levels</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">levels</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">levels</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">*</span> <span class="n">boxLength</span>
                            <span class="n">location</span> <span class="o">+=</span> <span class="n">startLength</span>  <span class="c1"># Figures out the beginning</span>

                            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">levels</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">or</span> <span class="n">numpy</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">levels</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])):</span>
                                <span class="n">Ll</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">location</span><span class="p">,</span> <span class="n">location</span><span class="p">])</span>
                                <span class="n">Tl</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">startThick</span><span class="p">,</span> <span class="n">startThick</span> <span class="o">+</span> <span class="n">thick</span><span class="p">])</span>
                            <span class="n">Lt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
                            <span class="n">Tt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">startThick</span> <span class="o">+</span> <span class="n">thick</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
                            <span class="n">St</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">legend</span><span class="p">[</span><span class="n">l</span><span class="p">])</span>
                            <span class="k">break</span>
        <span class="c1"># ok now creates the line object and text object</span>
        <span class="n">ln</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">createline</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">line</span><span class="p">)</span>
        <span class="n">txt</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">createtext</span><span class="p">(</span>
            <span class="n">To_source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">textorientation</span><span class="p">,</span>
            <span class="n">Tt_source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">texttable</span><span class="p">)</span>
        <span class="n">ln</span><span class="o">.</span><span class="n">_priority</span> <span class="o">=</span> <span class="n">priority</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">txt</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="n">priority</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">txt</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="n">St</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">legend</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">isHorizontal</span><span class="p">:</span>
                <span class="n">txt</span><span class="o">.</span><span class="n">halign</span> <span class="o">=</span> <span class="s2">&quot;center&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">txt</span><span class="o">.</span><span class="n">valign</span> <span class="o">=</span> <span class="s2">&quot;half&quot;</span>
        <span class="k">if</span> <span class="n">isHorizontal</span><span class="p">:</span>
            <span class="n">ln</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">Ll</span>
            <span class="n">ln</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">Tl</span>
            <span class="n">txt</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">Lt</span>
            <span class="n">txt</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">Tt</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ln</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">Tl</span>
            <span class="n">ln</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">Ll</span>
            <span class="n">txt</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">Tt</span>
            <span class="n">txt</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">Lt</span>

        <span class="c1"># Now reset the viewport and worldcoordiantes</span>
        <span class="n">displays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ln</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">bg</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">))</span>
        <span class="n">displays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">txt</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">bg</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">))</span>
        <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;line&quot;</span><span class="p">][</span><span class="n">ln</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
        <span class="n">sp</span> <span class="o">=</span> <span class="n">txt</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:::&quot;</span><span class="p">)</span>
        <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;texttable&quot;</span><span class="p">][</span><span class="n">sp</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
        <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;textorientation&quot;</span><span class="p">][</span><span class="n">sp</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
        <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;textcombined&quot;</span><span class="p">][</span><span class="n">txt</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
        <span class="n">x</span><span class="o">.</span><span class="n">_viewport</span> <span class="o">=</span> <span class="n">vp</span>
        <span class="n">x</span><span class="o">.</span><span class="n">_worldcoordinate</span> <span class="o">=</span> <span class="n">wc</span>
        <span class="k">return</span> <span class="n">displays</span></div>

<div class="viewcode-block" id="P.ratio_linear_projection"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.P.ratio_linear_projection">[docs]</a>    <span class="k">def</span> <span class="nf">ratio_linear_projection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon1</span><span class="p">,</span> <span class="n">lon2</span><span class="p">,</span> <span class="n">lat1</span><span class="p">,</span> <span class="n">lat2</span><span class="p">,</span>
                                <span class="n">Rwished</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Rout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                <span class="n">box_and_ticks</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes ratio to shrink the data area of a template in order</span>
<span class="sd">        that the overall area</span>
<span class="sd">        has the least possible deformation in linear projection</span>

<span class="sd">        Version: 1.1</span>
<span class="sd">        Notes: Thanks to Karl Taylor for the equation of &quot;optimal&quot; ratio</span>

<span class="sd">        Necessary arguments:</span>
<span class="sd">          lon1, lon2: in degrees_east  : Longitude spanned by plot</span>
<span class="sd">          lat1, lat2: in degrees_north : Latitude  spanned by plot</span>

<span class="sd">        Optional arguments:</span>
<span class="sd">          Rwished: Ratio y/x wished, None=automagic</span>
<span class="sd">          Rout: Ratio of output (default is US Letter=11./8.5)</span>
<span class="sd">                Also you can pass a string: &quot;A4&quot;,&quot;US LETTER&quot;, &quot;X&quot;/&quot;SCREEN&quot;,</span>
<span class="sd">                the latest uses the window information</span>
<span class="sd">          box_and_ticks: Also redefine box and ticks to the new region</span>
<span class="sd">        Returned:</span>
<span class="sd">          vcs template object</span>

<span class="sd">        Usage example:</span>
<span class="sd">          #USA</span>
<span class="sd">          t.ratio_linear_projection(-135,-50,20,50)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Converts lat/lon to rad</span>
        <span class="n">Lat1</span> <span class="o">=</span> <span class="n">lat1</span> <span class="o">/</span> <span class="mf">180.</span> <span class="o">*</span> <span class="n">numpy</span><span class="o">.</span><span class="n">pi</span>
        <span class="n">Lat2</span> <span class="o">=</span> <span class="n">lat2</span> <span class="o">/</span> <span class="mf">180.</span> <span class="o">*</span> <span class="n">numpy</span><span class="o">.</span><span class="n">pi</span>
        <span class="n">Lon1</span> <span class="o">=</span> <span class="n">lon1</span> <span class="o">/</span> <span class="mf">180.</span> <span class="o">*</span> <span class="n">numpy</span><span class="o">.</span><span class="n">pi</span>
        <span class="n">Lon2</span> <span class="o">=</span> <span class="n">lon2</span> <span class="o">/</span> <span class="mf">180.</span> <span class="o">*</span> <span class="n">numpy</span><span class="o">.</span><span class="n">pi</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">Lon1</span> <span class="o">==</span> <span class="n">Lon2</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">Lat1</span> <span class="o">==</span> <span class="n">Lat2</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">Rwished</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">Rwished</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span>
                            <span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">Lat2</span><span class="p">)</span> <span class="o">-</span>
                             <span class="n">numpy</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">Lat1</span><span class="p">))</span> <span class="o">/</span>
                            <span class="p">(</span><span class="n">Lon2</span> <span class="o">-</span>
                                <span class="n">Lon1</span><span class="p">)</span> <span class="o">/</span>
                            <span class="p">(</span><span class="mf">1.</span> <span class="o">+</span>
                                <span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span>
                                           <span class="n">Lat2</span><span class="p">)</span> <span class="o">-</span>
                                 <span class="n">numpy</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span>
                                           <span class="n">Lat1</span><span class="p">))</span> <span class="o">/</span>
                                <span class="mf">2.</span> <span class="o">/</span>
                                <span class="p">(</span><span class="n">Lat2</span> <span class="o">-</span>
                                 <span class="n">Lat1</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ratio</span><span class="p">(</span><span class="n">Rwished</span><span class="p">,</span> <span class="n">Rout</span><span class="p">,</span> <span class="n">box_and_ticks</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
        <span class="k">return</span></div>

<div class="viewcode-block" id="P.ratio"><a class="viewcode-back" href="../../vcs/template/template.html#vcs.template.P.ratio">[docs]</a>    <span class="k">def</span> <span class="nf">ratio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Rwished</span><span class="p">,</span> <span class="n">Rout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">box_and_ticks</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes ratio to shrink the data area of a template</span>
<span class="sd">        to have an y/x ratio of Rwished</span>
<span class="sd">        has the least possible deformation in linear projection</span>

<span class="sd">        Version: 1.1</span>

<span class="sd">        Necessary arguments:</span>
<span class="sd">          Rwished: Ratio y/x wished</span>
<span class="sd">        Optional arguments:</span>
<span class="sd">          Rout: Ratio of output (default is US Letter=11./8.5)</span>
<span class="sd">                Also you can pass a string: &quot;A4&quot;,&quot;US LETTER&quot;,</span>
<span class="sd">                &quot;X&quot;/&quot;SCREEN&quot;, the latest uses the window information</span>
<span class="sd">          box_and_ticks: Also redefine box and ticks to the new region</span>
<span class="sd">        Returned:</span>
<span class="sd">          vcs template object</span>

<span class="sd">        Usage example:</span>
<span class="sd">          # y is twice x</span>
<span class="sd">          t.ratio(2)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">Rout</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">Rout</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;a4&#39;</span><span class="p">:</span>
                <span class="n">Rout</span> <span class="o">=</span> <span class="mf">29.7</span> <span class="o">/</span> <span class="mf">21.</span>
                <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">isportrait</span><span class="p">():</span>
                    <span class="n">Rout</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">/</span> <span class="n">Rout</span>
            <span class="k">elif</span> <span class="n">Rout</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;us letter&#39;</span><span class="p">,</span> <span class="s1">&#39;letter&#39;</span><span class="p">,</span>
                                  <span class="s1">&#39;us_letter&#39;</span><span class="p">,</span> <span class="s1">&#39;usletter&#39;</span><span class="p">]:</span>
                <span class="n">Rout</span> <span class="o">=</span> <span class="mf">11.</span> <span class="o">/</span> <span class="mf">8.5</span>
                <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">isportrait</span><span class="p">():</span>
                    <span class="n">Rout</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">/</span> <span class="n">Rout</span>
            <span class="k">elif</span> <span class="n">Rout</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;x11&#39;</span><span class="p">,</span> <span class="s1">&#39;screen&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">iscanvasdisplayed</span><span class="p">():</span>  <span class="c1"># do we have the canvas opened ?</span>
                    <span class="n">info</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">canvasinfo</span><span class="p">()</span>
                    <span class="n">Rout</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># Not opened yet, assuming default size: 959/728</span>
                    <span class="n">Rout</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">/</span> <span class="o">.</span><span class="mi">758800507</span>
                    <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">isportrait</span><span class="p">():</span>
                        <span class="n">Rout</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">/</span> <span class="n">Rout</span>
        <span class="k">elif</span> <span class="n">Rout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">info</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">canvasinfo</span><span class="p">()</span>
                <span class="n">Rout</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">Rout</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">/</span> <span class="o">.</span><span class="mi">758800507</span>
                <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">isportrait</span><span class="p">():</span>
                    <span class="n">Rout</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">/</span> <span class="n">Rout</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">createtemplate</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># Computes the template ratio</span>
        <span class="n">Rt</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">y1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">x1</span><span class="p">)</span>

        <span class="c1"># Actual ratio template and output format combined</span>
        <span class="n">Ra</span> <span class="o">=</span> <span class="n">Rt</span> <span class="o">/</span> <span class="n">Rout</span>
        <span class="c1"># Ra=(self.data.y2-self.data.y1)/(self.data.x2-self.data.x1)</span>
        <span class="k">if</span> <span class="n">Rwished</span> <span class="o">&gt;</span> <span class="n">Ra</span><span class="p">:</span>
            <span class="n">t</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">Ra</span> <span class="o">/</span> <span class="n">Rwished</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">t</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">Rwished</span> <span class="o">/</span> <span class="n">Ra</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
        <span class="n">ndx</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x2</span> <span class="o">-</span> <span class="n">t</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x1</span>
        <span class="n">ndy</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y2</span> <span class="o">-</span> <span class="n">t</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y1</span>

        <span class="n">odx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x1</span>
        <span class="n">ody</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x1</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x2</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y1</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y2</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y2</span>

        <span class="k">if</span> <span class="n">odx</span> <span class="o">!=</span> <span class="n">ndx</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x1</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">x1</span> <span class="o">+</span> <span class="p">(</span><span class="n">odx</span> <span class="o">-</span> <span class="n">ndx</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">x2</span> <span class="o">+</span> <span class="p">(</span><span class="n">odx</span> <span class="o">-</span> <span class="n">ndx</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y1</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">y1</span> <span class="o">+</span> <span class="p">(</span><span class="n">ody</span> <span class="o">-</span> <span class="n">ndy</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">y2</span> <span class="o">+</span> <span class="p">(</span><span class="n">ody</span> <span class="o">-</span> <span class="n">ndy</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">box_and_ticks</span><span class="p">:</span>
            <span class="c1"># Used to calculate label positions</span>
            <span class="n">x_scale</span> <span class="o">=</span> <span class="n">ndx</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">odx</span><span class="p">)</span>
            <span class="n">y_scale</span> <span class="o">=</span> <span class="n">ndy</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">ody</span><span class="p">)</span>

            <span class="n">x_label_name_diff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xlabel1</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">xname</span><span class="o">.</span><span class="n">y</span>
            <span class="n">y_label_name_diff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ylabel1</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">yname</span><span class="o">.</span><span class="n">x</span>

            <span class="c1"># Box1 resize</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box1</span><span class="o">.</span><span class="n">_x1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box1</span><span class="o">.</span><span class="n">_x2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box1</span><span class="o">.</span><span class="n">_y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box1</span><span class="o">.</span><span class="n">_y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y2</span>
            <span class="c1"># xLabel distance save</span>
            <span class="n">dY1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xlabel1</span><span class="o">.</span><span class="n">_y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtic1</span><span class="o">.</span><span class="n">_y1</span>
            <span class="n">dY2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xlabel2</span><span class="o">.</span><span class="n">_y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtic2</span><span class="o">.</span><span class="n">_y1</span>
            <span class="c1"># xLabel distance save</span>
            <span class="n">dX1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ylabel1</span><span class="o">.</span><span class="n">_x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ytic1</span><span class="o">.</span><span class="n">_x1</span>
            <span class="n">dX2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ylabel2</span><span class="o">.</span><span class="n">_x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ytic2</span><span class="o">.</span><span class="n">_x1</span>
            <span class="c1"># X tic</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtic1</span><span class="o">.</span><span class="n">_y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtic1</span><span class="o">.</span><span class="n">_y1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xtic1</span><span class="o">.</span><span class="n">_y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xtic1</span><span class="o">.</span><span class="n">_y2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtic1</span><span class="o">.</span><span class="n">y1</span> <span class="o">+</span> <span class="n">dy</span><span class="p">))</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtic2</span><span class="o">.</span><span class="n">_y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtic2</span><span class="o">.</span><span class="n">_y1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xtic2</span><span class="o">.</span><span class="n">_y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xtic2</span><span class="o">.</span><span class="n">_y2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtic2</span><span class="o">.</span><span class="n">y1</span> <span class="o">+</span> <span class="n">dy</span><span class="p">))</span>
            <span class="c1"># Xmin tic</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmintic1</span><span class="o">.</span><span class="n">_y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmintic1</span><span class="o">.</span><span class="n">_y1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xmintic1</span><span class="o">.</span><span class="n">_y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xmintic1</span><span class="o">.</span><span class="n">_y2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtic1</span><span class="o">.</span><span class="n">_y1</span> <span class="o">+</span> <span class="n">dy</span><span class="p">))</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmintic2</span><span class="o">.</span><span class="n">_y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmintic2</span><span class="o">.</span><span class="n">_y1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xmintic2</span><span class="o">.</span><span class="n">_y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_y2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xmintic2</span><span class="o">.</span><span class="n">_y2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmintic2</span><span class="o">.</span><span class="n">_y1</span> <span class="o">+</span> <span class="n">dy</span><span class="p">))</span>
            <span class="c1"># Y tic</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ytic1</span><span class="o">.</span><span class="n">_x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ytic1</span><span class="o">.</span><span class="n">_x1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ytic1</span><span class="o">.</span><span class="n">_x1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ytic1</span><span class="o">.</span><span class="n">_x2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ytic1</span><span class="o">.</span><span class="n">_x1</span> <span class="o">+</span> <span class="n">dx</span><span class="p">))</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ytic2</span><span class="o">.</span><span class="n">_x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ytic2</span><span class="o">.</span><span class="n">_x1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ytic2</span><span class="o">.</span><span class="n">_x1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ytic2</span><span class="o">.</span><span class="n">_x2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ytic2</span><span class="o">.</span><span class="n">_x1</span> <span class="o">+</span> <span class="n">dx</span><span class="p">))</span>
            <span class="c1"># Ymin tic</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ymintic1</span><span class="o">.</span><span class="n">_x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ymintic1</span><span class="o">.</span><span class="n">_x1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ymintic1</span><span class="o">.</span><span class="n">_x1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ymintic1</span><span class="o">.</span><span class="n">_x2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ymintic1</span><span class="o">.</span><span class="n">_x1</span> <span class="o">+</span> <span class="n">dx</span><span class="p">))</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ymintic2</span><span class="o">.</span><span class="n">_x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ymintic2</span><span class="o">.</span><span class="n">_x1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ymintic2</span><span class="o">.</span><span class="n">_x1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_x2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ymintic2</span><span class="o">.</span><span class="n">_x2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ymintic2</span><span class="o">.</span><span class="n">_x1</span> <span class="o">+</span> <span class="n">dx</span><span class="p">))</span>
            <span class="c1"># Xlabels</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xlabel1</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtic1</span><span class="o">.</span><span class="n">_y1</span> <span class="o">+</span> <span class="n">dY1</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xlabel2</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xtic2</span><span class="o">.</span><span class="n">_y1</span> <span class="o">+</span> <span class="n">dY2</span><span class="p">))</span>
            <span class="c1"># Ylabels</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ylabel1</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ytic1</span><span class="o">.</span><span class="n">_x1</span> <span class="o">+</span> <span class="n">dX1</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ylabel2</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ytic2</span><span class="o">.</span><span class="n">_x1</span> <span class="o">+</span> <span class="n">dX2</span><span class="p">))</span>

            <span class="c1"># Axis Names</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xname</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xlabel1</span><span class="o">.</span><span class="n">_y</span> <span class="o">-</span> <span class="n">x_scale</span> <span class="o">*</span> <span class="n">x_label_name_diff</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yname</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ylabel1</span><span class="o">.</span><span class="n">_x</span> <span class="o">-</span> <span class="n">y_scale</span> <span class="o">*</span> <span class="n">y_label_name_diff</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_ratio</span> <span class="o">=</span> <span class="o">-</span><span class="n">Rwished</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_ratio</span> <span class="o">=</span> <span class="n">Rwished</span>

        <span class="k">del</span><span class="p">(</span><span class="n">vcs</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="s2">&quot;template&quot;</span><span class="p">][</span><span class="n">t</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
        <span class="k">return</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/uvcdat.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">VCS 2.4.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../vcs.html" >vcs</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, LLNL.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
  </body>
</html>